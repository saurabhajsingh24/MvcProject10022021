@model KeystoneProject.Models.Patient.PatientOPD

@{
    ViewBag.Title = "Patient";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


@*<!DOCTYPE html>
    <html>
    <head>*@
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<style>
    @@media only screen and (max-width: 425px) {
        .cpb-10 {
            padding-bottom: 10px;
        }
    }

    .custom-file-label::after {
        font-family: 'FontAwesome';
        content: "\f093";
    }

    .OPD {
        display: none;
    }

    .IPD {
        display: block;
    }

    .input-group-addon {
        padding: 0px 5px;
    }

    /*.form-control::placeholder {
        color: #bbc1c5;
    }*/
    /* The container */
    .container1 {
        /*display: block;*/
        position: relative;
        /*padding-left: 35px;
        margin-bottom: 12px;
        cursor: pointer;
        font-size: 22px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;*/
    }
        /* Hide the browser's default checkbox */
        .container1 input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
    /* Create a custom checkbox */
    .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 18px;
        width: 18px;
        background-color: #fff;
        border-radius: 2px;
        border: 1px solid #35a4f1;
    }
    /* On mouse-over, add a grey background color */
    .container1:hover input ~ .checkmark {
        background-color: #ccc;
    }
    /* When the checkbox is checked, add a blue background */
    .container1 input:checked ~ .checkmark {
        background-color: #2196F3;
    }
    /* Create the checkmark/indicator (hidden when not checked) */
    .checkmark:after {
        content: "";
        position: absolute;
        display: none;
    }
    /* Show the checkmark when checked */
    .container1 input:checked ~ .checkmark:after {
        display: block;
    }
    /* Style the checkmark/indicator */
    .container1 .checkmark:after {
        left: 6px;
        top: 2px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
    }
</style>
<style>
    /* The container */
    .container2 {
        display: block;
        position: relative;
        padding-left: 20px;
        cursor: pointer;
        font-size: 22px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
        /* Hide the browser's default checkbox */
        .container2 input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
    /* Create a custom checkbox */
    .checkmark2 {
        position: absolute;
        top: 0;
        left: 0;
        height: 18px;
        width: 18px;
        background-color: #fff;
        border-radius: 2px;
        border: 1px solid #35a4f1;
    }
    /* On mouse-over, add a grey background color */
    .container2:hover input ~ .checkmark2 {
        background-color: #ccc;
    }
    /* When the checkbox is checked, add a blue background */
    .container2 input:checked ~ .checkmark2 {
        background-color: #2196F3;
    }
    /* Create the checkmark/indicator (hidden when not checked) */
    .checkmark2:after {
        content: "";
        position: absolute;
        display: none;
    }
    /* Show the checkmark when checked */
    .container2 input:checked ~ .checkmark2:after {
        display: block;
    }
    /* Style the checkmark/indicator */
    .container2 .checkmark2:after {
        left: 6px;
        top: 2px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
    }
</style>

<script>
    $(document).ready(function () {
        $('#maintable').DataTable({
            type: 'post',
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $('input[type="radio"]').click(function () {
            var inputValue = $(this).attr("value");
            var targetBox = $("." + inputValue);
            $(".box").not(targetBox).hide();
            $(targetBox).show();

        });
    });
</script>

<script>
    $(document).ready(function () {
        $("#stickerModalButton").click(function () {
            $('#stickerModal').modal('show');
        })
    })
</script>

<script>
    $(document).ready(function () {
       // $("#PntID").show();
        // window.location.reload(true);
        //  window.onload(true);
        //$(window).on('load', function () {
        //    $('#myModal').modal('show');
        //});
        $('input[type="text"],[type="number"],textarea,hidden,email').val('');
        //$('input[type="textarea"]').val('');
        //$('input').val('');
        // $('input')[text],text
        $("#OPDNOID").show();
        $("#TPACheck").hide();
        $(".container1").hide();
        $("#ipd").hide();
        $("#opd").show();
        $("#cancelID").hide();
        $("#SecurityDeposit").attr('readonly', true);
        $("#BtnShowPatientAppointDetail").show();

        //$("#BtnShowDetail").click(function () {
        //    debugger
        //    $('#modalOPD').prop('checked', true);



        //var text =  $("#Search").val($("input[name=modalRadio]").val());
        //var value = $(this).val(text).toLowerCase();
        //    $("#myModal1 tbody tr").filter(function () {
        //        $(this).toggle($(this).text(text).toLowerCase().indexOf(value) > -1)
        //    });
        //})

        $('#PrintRegNo').change(function () {
            debugger
            var printReg = $(this).val();

            $.ajax({
                url: '@Url.Action("GetPrintNo_ToRegNo", "PatientOPD")',
                dataType: "json",
                type: 'GET',
                data: { PrintRegNo: $("#PrintRegNo").val()},

                success: function (data) {
                    debugger
                    $("input[type=text],input[type=number] ,hidden").val("");
                    $('#PrintRegNo').val(printReg)
                    $('#PrtRegNo').text(printReg)
                    //  $('#fin_year_id').val(fin_year_id);
                    if (data == "") {
                        alert("Patient RegNo Does Not Exists");
                        return false;
                    }
                    $("#RegNo").val(data)
                    var d = "";



                    d = $("#RegNo").val();


                    if (d > 0) {

                        if (d > 0) {
                            $("#Revisit").text("Revisit");
                            $("#Regnew").val("Revisit");
                            $("#RegNo").val(d);
                        }
                        else {
                            $("#Revisit").text("New Registration");
                            $("#Regnew").val("New Registration");
                            $("#RegNo").val('0');
                        }

                        $.ajax({

                            type: "POST",
                            url: '@Url.Action("FillRevisit", "PatientOPD")',
                            datatype: "json",
                            data: { PatientRegNO: d },
                            success: function (data) {

                                debugger
                                if (data.length == 0) {
                                    alert("Registration number does not exist");
                                }
                                else {
                                    debugger

                                    $(data).each(function (index, d) {
                                        debugger

                                        if (data[0].Message == "Patient already Exists in IPD. So you can not revisit without discharge.") {
                                            alert(data[0].Message);
                                            return false;

                                        }


                                        debugger

                                        if (data[0].PatientType == "IPD") {
                                            // $("input[name='colorRadio']").val("red");

                                            $("#IPD").prop("checked", true);
                                            $("#IPDNOID").show();
                                            $("#OPDNOID").hide();
                                            $(".IPDBox").show();
                                            $("#IPDBox1").show();
                                            $("#TPACheck").show();
                                            $(".container1").show();
                                            $("#JointDr").show();
                                            $("#BtnShowPatientAppointDetail").hide();
                                            $("#OPDBillID").hide();
                                            $("#IPDBillID").show();

                                        }
                                        else {
                                            $("#IPD").prop("checked", false);
                                            $("#IPDNOID").hide();
                                            $("#OPDNOID").show();
                                            $(".IPDBox").hide();
                                            $("#IPDBox1").hide();
                                            $("#JointDr").hide();
                                            $("#BtnShowPatientAppointDetail").show();
                                            $("#OPDBillID").show();
                                            $("#IPDBillID").hide();
                                            //  $("#TPACheck").hide();
                                        }
                                        if (data[0].PatientType == "OPD") {
                                            $("#BtnShowPatientAppointDetail").show();
                                            $("#OPD").prop("checked", true);
                                            $("#OPDNOID").show();
                                            $("#PFPatientNameID").val(data[0].PFPatientName);
                                            //   alert($("#PrintOPDNo").val());
                                            $("#IPDNOID").hide();
                                            $("#JointDr").hide();
                                            $("#IPDBillID").hide();
                                            $("#OPDBillID").show();
                                            $("#RegNo").val(data[0].PatientRegNo);
                                            $("#FirstName").val(data[0].PFirstName);
                                            $("#MiddleName").val(data[0].PMiddleName);
                                            $("#LastName").val(data[0].PLastName);
                                            $("#GuardianName").val(data[0].GuardianName);
                                            $("#BP").val(data[0].BloodPressure);
                                            $("#Height").val(data[0].Height);
                                            // $("#Source").val(data[0].Source);
                                            $("#DateOfBirth").val(data[0].DateOfBirth);
                                            CalGetDaysAge();
                                            // $("#Source").val(d.Source);
                                            // $("#Reason").val(d.Reason);
                                            $("#Address").val(data[0].Address);
                                            $("#CityID").val(data[0].CityID);
                                            $("#Pincode").val(data[0].PinCode);

                                            $("#Country").val(data[0].CountryName);
                                            $("#State").val(data[0].StateName);
                                            $("#CityName").val(data[0].CityName);

                                            $("#PhoneNumber").val(data[0].PhoneNo);
                                            $("#EmailID").val(data[0].EmailID);
                                            $("#CountryID").val(data[0].CountryID);
                                            $("#PanCardNo").val(data[0].PanCardNo);
                                            $("#MobileNo").val(data[0].MobileNo);
                                            $("#StateID").val(data[0].StateID);
                                            $("#AadhaarNo").val(data[0].AadhaarNo);

                                            $("#DepartMentID").val(data[1].DepartmentID);
                                            $("#DepartMentName").val(data[1].DepartmentName);
                                            $("#ConsultantDoctorID").val(data[1].DoctorID);
                                            $("#ReferredByDoctorID").val(data[1].ReferredByDoctorID);
                                            $("#ConsultantDoctorName").val(data[1].DoctorPrintName);
                                            $("#ReferredByDoctorName").val(data[1].ReferredByDoctorName);
                                            $("#RevisitOPD_OPD_No").val(data[1].PatientOPDNO);
                                        }
                                        else {
                                            $("#OPD").prop("checked", false);
                                            $("#OPDNOID").hide();
                                            $("#JointDr").show();
                                            $("#BtnShowPatientAppointDetail").hide();
                                            $("#IPDBillID").show();
                                            $("#OPDBillID").hide();
                                            $("#RegNo").val(data[0].PatientRegNo);
                                            $("#FirstName").val(data[0].PFirstName);
                                            $("#MiddleName").val(data[0].PMiddleName);
                                            //alert(data[1].PrintOPDNo);
                                            debugger
                                            //  $("#PrintOPDNo").text(data[1].PrintOPDNo);
                                            $("#LastName").val(data[0].PLastName);
                                            $("#GuardianName").val(data[0].GuardianName);
                                            $("#BP").val(data[0].BloodPressure);
                                            $("#Height").val(data[0].Height);
                                            // $("#Source").val(data[0].Source);
                                            $("#DateOfBirth").val(data[0].DateOfBirth);

                                            CalGetDaysAge();
                                            // $("#Source").val(d.Source);
                                            // $("#Reason").val(d.Reason);
                                            $("#Address").val(data[0].Address);
                                            $("#CityID").val(data[0].CityID);
                                            $("#Pincode").val(data[0].PinCode);

                                            $("#Country").val(data[0].CountryName);
                                            $("#State").val(data[0].StateName);
                                            $("#CityName").val(data[0].CityName);

                                            $("#PhoneNumber").val(data[0].PhoneNo);
                                            $("#EmailID").val(data[0].EmailID);
                                            $("#CountryID").val(data[0].CountryID);
                                            $("#PanCardNo").val(data[0].PanCardNo);
                                            $("#MobileNo").val(data[0].MobileNo);
                                            $("#StateID").val(data[0].StateID);
                                            $("#AadhaarNo").val(data[0].AadhaarNo);

                                            $("#DepartMentID").val(data[1].DepartmentID);
                                            $("#DepartMentName").val(data[1].DepartmentName);
                                            $("#ConsultantDoctorID").val(data[1].DoctorID);
                                            $("#ReferredByDoctorID").val(data[1].ReferredByDoctorID);
                                            $("#ConsultantDoctorName").val(data[1].DoctorPrintName);
                                            $("#ReferredByDoctorName").val(data[1].ReferredByDoctorName);
                                            $("#RevisitOPD_OPD_No").val(data[1].PatientOPDNO);
                                            //$("#Reason").val(data[1].Reason);

                                            //if (data[1].TPA_ID != 0) {
                                            //    $("#TPACheck").prop("checked", true);
                                            //    $("#TPAChk").text('TPA');
                                            //    // $("#TPAName").val(data[1].TPA_Name);
                                            //}
                                            //else {
                                            //    $("#TPACheck").prop("checked", false);
                                            //}

                                            $("#Weight").val(data[1].Weight);

                                            $("#OPDImage3").val(data[0].Photo);
                                            document.getElementById('img1').src = data[0].Photo;


                                        }
                                        //$("#RegistrationDate").val(data[1].PatientRegistrationDate);
                                        //$("#RegistrationTime").val(data[1].time);
                                       

                                    })
                                }

                            }


                        })



                    }


                    //  PatientDetailFillData();
                }
            })

            debugger
            //selValue2 = $('input[name=RadioChargee]:checked').val();

            //if (selValue2 == "2") {

            //}
            //if (selValue2 == '1') {

            //    //AutoBindService();

            //}
        });

        $("input[name='colorRadio']").click(function () {

            debugger
            if ($(this).val() == "OPD") {
                $("#Revisit").text("New Registration");
                $("#OPDNOID").show();
                $("#TPACheck").hide();
                $(".container1").hide();
                $("#JointDr").hide();
                $("#cancelID").hide();
                $("#BtnShowPatientAppointDetail").show();
                $("#IPDBillID").hide();
                $("#OPDBillID").show();
                $("#A4_sticker").hide();
                $('#modalOPD').prop('checked', true);

                $("#Search").val($(this).val());
                var value = $(this).val().toLowerCase();
                $("#myModal1 tbody tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            }
            else {
                $("#Revisit").text("New Admission");
                $("#OPDNOID").hide();
                $("#BtnShowPatientAppointDetail").hide();
                $("#cancelID").show();
                $("#IPDBillID").hide();
                $("#OPDBillID").show();
            }
            if ($(this).val() == "IPD") {
                $("#Revisit").text("New Admission");
                $("#IPDNOID").show();
                $(".IPDBox").show();
                $("#IPDBox1").show();
                $("#TPACheck").show();
                $(".container1").show();
                $("#JointDr").show();
                // $("#cancelID").show();
                $("#BtnShowPatientAppointDetail").hide();
                $("#IPDBillID").show();
                $("#OPDBillID").hide();
                $("#A4_sticker").show();
                $('#modalIPD').prop('checked', true);

                $("#Search").val($(this).val());
                var value = $(this).val().toLowerCase();
                $("#myModal1 tbody tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            }
            else {
                $("#Revisit").text("New Registration");
                $("#IPDNOID").hide();
                $(".IPDBox").hide();
                $("#IPDBox1").hide();
                $("#cancelID").hide();
                $("#BtnShowPatientAppointDetail").show();
                $("#OPDBillID").show();
                $("#IPDBillID").hide();
            }
        })


        $.ajax({
            //url: "/PatientOPDBill/GetAllFinancialYear",
            url: '@Url.Action("GetAllFinancialYear", "PatientOPD")',
            type: "GET",
            data: {},
            dataType: "json",
            success: function (data) {
                debugger;
                $(data).each(function (index, d) {
                    $("#FinancialYear").append($("<option value=" + d.FinancialYear + ">" + d.FinancialYear + "</option>"));
                    $("#FinancialYearID").val(data[0].FinancialYearID);
                });
            },
            error: function (data) {
            }
        });

        $("#CityName").autocomplete({
            source: function (request, response) {

                $.ajax({

                    url: '@Url.Action("City", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {

                            return {
                                label: item.CityName, value: item.CityName, id: item.CityID
                            };

                        }))

                    }

                })

            },

            minLength: 1,
            select: function (event, ui) {
                $("#CityID").val(ui.item.id);

                //  this.value = '';

                $.ajax({
                    url: '@Url.Action("GetCountryStateID", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { CityID: ui.item.id },
                    success: function (data) {
                        if (data.length > 0) {
                            $("#State").val(data[0].StateName);
                            $("#StateID").val(data[0].StateID);
                            $("#CountryID").val(data[0].CountryID);
                            $("#Country").val(data[0].CountryName);
                        }
                        else {
                            $("#State").val('');
                            $("#StateID").val('');
                            $("#CountryID").val('');
                            $("#Country").val('');
                        }

                    }
                });

            }


        });

        function CalGetDaysAge() {

            $.ajax({
                url: '@Url.Action("CalGetDaysAge", "PatientOPD")',
                type: "GET",
                data: { datebirth: $("#DateOfBirth").val() },
                dataType: "json",
                success: function (data) {
                    // $("#DateOfBirth").val(data);
                    $("#Day").val(data[0].day);

                    $("#Month").val(data[0].Month);

                    $("#Year").val(data[0].year);
                }
            })
        }
        $(document).ready(function () {
            $("#patientdataclose").hide();

            $("#FirstName").autocomplete({

                source: function (request, response) {

                    $.ajax({

                        url: '@Url.Action("BindPatientName", "PatientOPD")',
                        type: "POST",
                        datatype: "json",
                        data: { prefix: request.term },
                        success: function (data) {
                            debugger;
                            response($.map(data, function (item) {
                                return {
                                    label: item.PatientName, value: item.PatientName, PatientRegNo: item.PatientRegNo, printRegNo: item.printRegNo
                                };
                            }))

                        }

                    })
                },

                minLength: 1,
                change: function (event, ui) {
                    if ($("#RegNo").val() == "") {
                        $("#RegNo").val('0');
                        $("#PrintRegNo").val('0');
                       
                    }
                },
                minLength: 1,
                select: function (event, ui) {

                    if (!ui.item) {
                        debugger
                        $("#Revisit").text("New Registration");

                        // alert("abc");
                        $("#RegNo").val('0');
                        //$("#FirstName").val();
                        $("#MiddleName").val('');
                        $("#LastName").val('');
                        $("#Weight").val('');
                        $("#Height").val('');
                        $("#DepartMentName").val('');
                        $("#Source").val('');
                        $("#Reason").val('');
                        $("#Address").val('');
                        $("#CityID").val('');
                        $("#Pincode").val('');

                        $("#PhoneNumber").val('');
                        $("#EmailID").val('');
                        $("#CountryID").val('');
                        $("#PanCardNo").val('');
                        $("#MobileNo").val('');
                        $("#StateID").val('');


                    }


                    var d = "";

                    debugger
                    d = ui.item.PatientRegNo;
                    $("#PrintRegNo").val(ui.item.printRegNo);
                    $('#PrtRegNo').text(ui.item.printRegNo)
                    if (d > 0) {

                        if (d > 0) {
                            $("#Revisit").text("Revisit");
                            $("#Regnew").val("Revisit");
                            $("#RegNo").val(d);
                        }
                        else {
                            $("#Revisit").text("New Registration");
                            $("#Regnew").val("New Registration");
                            $("#RegNo").val("");
                        }

                        $.ajax({

                            type: "POST",
                            url: '@Url.Action("FillRevisit", "PatientOPD")',
                            datatype: "json",
                            data: { PatientRegNO: d },
                            success: function (data) {


                                $(data).each(function (index, d) {
                                    debugger


                                    if (data[0].Message == "Patient already Exists in IPD. So you can not revisit without discharge.") {
                                        alert(data[0].Message);
                                        return false;

                                    }
                                    //if (data[0].PatientType == "IPD") {
                                    //    // $("input[name='colorRadio']").val("red");

                                    //  //  $("#IPD").prop("checked", true);
                                    //    $("#IPDNOID").show();
                                    //    $("#OPDNOID").hide();
                                    //    $(".IPDBox").show();
                                    //    $("#IPDBox1").show();
                                    //    $("#TPACheck").show();
                                    //    $(".container1").show();
                                    //    $("#JointDr").show();

                                    //}
                                    //else {
                                    //    $("#IPD").prop("checked", false);
                                    //    $("#IPDNOID").hide();
                                    //    $("#OPDNOID").show();
                                    //    $(".IPDBox").hide();
                                    //    $("#IPDBox1").hide();
                                    //    $("#JointDr").hide();
                                    //    //  $("#TPACheck").hide();
                                    //}
                                    //if (data[0].PatientType == "OPD") {

                                    //    $("#OPD").prop("checked", true);
                                    //    $("#OPDNOID").show();
                                    //    $("#IPDNOID").hide();
                                    //    $("#JointDr").hide();
                                    //}
                                    //else {
                                    //    $("#OPD").prop("checked", false);
                                    //    $("#OPDNOID").hide();
                                    //    $("#JointDr").show();
                                    //}

                                    $("#RegNo").val(data[0].PatientRegNo);
                                    $("#FirstName").val(data[0].PFirstName);
                                    $("#MiddleName").val(data[0].PMiddleName);
                                    $("#LastName").val(data[0].PLastName);
                                    $("#GuardianName").val(data[0].GuardianName);
                                    $("#Height").val(data[0].Height);
                                    $("#Source").val(data[0].Source);
                                    $("#DateOfBirth").val(data[0].DateOfBirth);

                                    CalGetDaysAge();
                                    // $("#Source").val(d.Source);
                                    // $("#Reason").val(d.Reason);
                                    $("#Address").val(data[0].Address);
                                    $("#CityID").val(data[0].CityID);
                                    $("#Pincode").val(data[0].PinCode);

                                    $("#Country").val(data[0].CountryName);
                                    $("#State").val(data[0].StateName);
                                    $("#CityName").val(data[0].CityName);

                                    $("#PhoneNumber").val(data[0].PhoneNo);
                                    $("#EmailID").val(data[0].EmailID);
                                    $("#CountryID").val(data[0].CountryID);
                                    $("#PanCardNo").val(data[0].PanCardNo);
                                    $("#MobileNo").val(data[0].MobileNo);
                                    $("#StateID").val(data[0].StateID);
                                    $("#AadhaarNo").val(data[0].AadhaarNo);

                                    //$("#DepartMentID").val(data[1].DepartmentID);
                                    //$("#DepartMentName").val(data[1].DepartmentName);
                                    $("#ConsultantDoctorID").val(data[1].DoctorID);
                                    //$("#ReferredByDoctorID").val(data[1].ReferredByDoctorID);
                                    //   alert(data[1].DoctorPrintName);
                                    $("#ConsultantDoctorName").val(data[1].DoctorPrintName);
                                    //$("#ReferredByDoctorName").val(data[1].ReferredByDoctorName);
                                    $("#RevisitOPD_OPD_No").val(data[1].PatientOPDNO);
                                    $("#Reason").val(data[1].Reason);

                                    if (data[1].TPA_ID != 0) {
                                        $("#TPACheck").prop("checked", true);
                                        $("#TPAChk").text('TPA');
                                      // $("#TPAName").val(data[1].TPA_Name);
                                    }
                                    else {
                                        $("#TPACheck").prop("checked", false);
                                    }

                                    $("#Weight").val(data[1].Weight);

                                    $("#ClaimNo").val(data[1].CCNClaimNo);
                                    $("#PolicyNo").val(data[1].PolicyNo);



                                    //$("#WardID").val(data[3].WardID);
                                    //$("#Wardname").val(data[3].WardName);
                                    //$("#RoomID").val(data[3].RoomID);
                                    //$("#RoomNo").val(data[3].RoomNo);
                                    //$("#BedID").val(data[3].BedID);
                                    //$("#BedNo").val(data[3].BedNO);
                                    if (data[1].TPA_ID > 0) {
                                        $("#TPAChk").text('TPA');
                                    }
                                    //$("#TPANameID").val(data[1].TPA_ID);
                                    //$("#TPAName").val(data[1].TPA_Name);
                                    //$("#OrganizationID").val(data[1].OrganizationID);
                                    //$("#OrganizationName").val(data[1].OrganizationName);
                                    //$("#InsuranceID").val(data[1].InsuranceCompnyID);
                                    //$("#InsuranceName").val(data[1].InsuranceCompny);
                                    //alert(data[1].AdvanceAmt);
                                    //$("#DepositeAmt").val(data[1].AdvanceAmt);
                                    $("#OPDImage3").val(data[0].Photo);
                                    document.getElementById('img1').src = data[0].Photo;
                                    //$("#SecurityDeposityID").val(data[4].SecurityDeposityID);
                                    //$("#SecurityDeposit").val(data[4].CrAmount);


                                })

                            }


                        })



                    }
                }




            })


            $("#RegNo").change(function () {



                var d = "";



                d = $("#RegNo").val();


                if (d > 0) {

                    if (d > 0) {
                        $("#Revisit").text("Revisit");
                        $("#Regnew").val("Revisit");
                        $("#RegNo").val(d);
                    }
                    else {
                        $("#Revisit").text("New Registration");
                        $("#Regnew").val("New Registration");
                        $("#RegNo").val('0');
                    }

                    $.ajax({

                        type: "POST",
                        url: '@Url.Action("FillRevisit", "PatientOPD")',
                        datatype: "json",
                        data: { PatientRegNO: d },
                        success: function (data) {

                            debugger
                            if (data.length == 0) {
                                alert("Registration number does not exist");
                            }
                            else {


                                $(data).each(function (index, d) {
                                    debugger

                                    if (data[0].Message == "Patient already Exists in IPD. So you can not revisit without discharge.") {
                                        alert(data[0].Message);
                                        return false;

                                    }




                                    if (data[0].PatientType == "IPD") {
                                        // $("input[name='colorRadio']").val("red");

                                        $("#IPD").prop("checked", true);
                                        $("#IPDNOID").show();
                                        $("#OPDNOID").hide();
                                        $(".IPDBox").show();
                                        $("#IPDBox1").show();
                                        $("#TPACheck").show();
                                        $(".container1").show();
                                        $("#JointDr").show();
                                        $("#BtnShowPatientAppointDetail").hide();
                                        $("#OPDBillID").hide();
                                        $("#IPDBillID").show();

                                    }
                                    else {
                                        $("#IPD").prop("checked", false);
                                        $("#IPDNOID").hide();
                                        $("#OPDNOID").show();
                                        $(".IPDBox").hide();
                                        $("#IPDBox1").hide();
                                        $("#JointDr").hide();
                                        $("#BtnShowPatientAppointDetail").show();
                                        $("#OPDBillID").show();
                                        $("#IPDBillID").hide();
                                        //  $("#TPACheck").hide();
                                    }
                                    if (data[0].PatientType == "OPD") {
                                        $("#BtnShowPatientAppointDetail").show();
                                        $("#OPD").prop("checked", true);
                                        $("#OPDNOID").show();
                                        $("#IPDNOID").hide();
                                        $("#JointDr").hide();
                                        $("#IPDBillID").hide();
                                        $("#OPDBillID").show();
                                    }
                                    else {
                                        $("#OPD").prop("checked", false);
                                        $("#OPDNOID").hide();
                                        $("#JointDr").show();
                                        $("#BtnShowPatientAppointDetail").hide();
                                        $("#IPDBillID").show();
                                        $("#OPDBillID").hide();
                                    }

                                    $("#RegNo").val(data[0].PatientRegNo);
                                    $("#FirstName").val(data[0].PFirstName);
                                    $("#MiddleName").val(data[0].PMiddleName);
                                    $("#LastName").val(data[0].PLastName);
                                    $("#GuardianName").val(data[0].GuardianName);
                                    $("#BP").val(data[0].BloodPressure);
                                    $("#Height").val(data[0].Height);
                                    // $("#Source").val(data[0].Source);
                                    $("#DateOfBirth").val(data[0].DateOfBirth);

                                    CalGetDaysAge();
                                    // $("#Source").val(d.Source);
                                    // $("#Reason").val(d.Reason);
                                    $("#Address").val(data[0].Address);
                                    $("#CityID").val(data[0].CityID);
                                    $("#Pincode").val(data[0].PinCode);

                                    $("#Country").val(data[0].CountryName);
                                    $("#State").val(data[0].StateName);
                                    $("#CityName").val(data[0].CityName);

                                    $("#PhoneNumber").val(data[0].PhoneNo);
                                    $("#EmailID").val(data[0].EmailID);
                                    $("#CountryID").val(data[0].CountryID);
                                    $("#PanCardNo").val(data[0].PanCardNo);
                                    $("#MobileNo").val(data[0].MobileNo);
                                    $("#StateID").val(data[0].StateID);
                                    $("#AadhaarNo").val(data[0].AadhaarNo);

                                    $("#DepartMentID").val(data[1].DepartmentID);
                                    $("#DepartMentName").val(data[1].DepartmentName);
                                    $("#ConsultantDoctorID").val(data[1].DoctorID);
                                    $("#ReferredByDoctorID").val(data[1].ReferredByDoctorID);
                                    $("#ConsultantDoctorName").val(data[1].DoctorPrintName);
                                    $("#ReferredByDoctorName").val(data[1].ReferredByDoctorName);
                                    $("#RevisitOPD_OPD_No").val(data[1].PatientOPDNO);
                                    //$("#Reason").val(data[1].Reason);

                                    if (data[1].TPA_ID != 0) {
                                        $("#TPACheck").prop("checked", true);
                                        $("#TPAChk").text('TPA');
                                    }
                                    else {
                                        $("#TPACheck").prop("checked", false);
                                    }

                                    $("#Weight").val(data[1].Weight);


                                    $("#OPDImage3").val(data[0].Photo);
                                    document.getElementById('img1').src = data[0].Photo;



                                })
                            }

                        }


                    })



                }



            });









        });


        $("#DepartMentName").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("Department", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item.DepartmentName, value: item.DepartmentName, id: item.DepartmentID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    //  this.value = '';

                }
            }


        })

        $.ajax({
            url: '@Url.Action("WardName", "PatientOPD")',
            type: "GET",
            dataType: "json",
            data: { prefix: "%" },
            success: function (data) {

                debugger
                for (var row = 0; row < data.length; row++) {
                    //  $(".fstlist").append('<div data-value=' + data[row].WardID + ' >' + data[row].WardName + '</div>');
                    $("#Wardname").append('<option value=' + data[row].WardID + '>' + data[row].WardName + ' </option>')
                }

            }

        })

        $("#Wardname").change(function () {
            debugger
            $("#WardID").val($(this).val());


            $.ajax({
                url: '@Url.Action("RoomNo", "PatientOPD")',
                type: "POST",
                dataType: "json",
                data: { Roomname: "%", WardID: $("#WardID").val() },
                success: function (data) {
                    $("#BedNo").val("");
                    $("#BedNo").text("");
                    $("#BedNo").append('<option value="-1 ">Select </option>')
                    $("#RoomNo").val("");
                    $("#RoomNo").text("");
                    $("#RoomNo").append('<option value="-1 ">Select </option>')
                    for (var row = 0; row < data.length; row++) {
                        //  $(".fstlist").append('<div data-value=' + data[row].WardID + ' >' + data[row].WardName + '</div>');
                        $("#RoomNo").append('<option value=' + data[row].RoomID + '>' + data[row].RoomNo + ' </option>')
                    }
                }
            })
        })

        $("#RoomNo").change(function () {
            debugger
            $("#RoomID").val($(this).val());
            $.ajax({
                url: '@Url.Action("BindBedNo", "PatientOPD")',
                type: "POST",
                dataType: "json",
                data: { BedNo: "%", RoomID: $("#RoomID").val() },
                success: function (data) {
                    $("#BedNo").val("");
                    $("#BedNo").text("");
                    $("#BedNo").append('<option value="-1 ">Select </option>')
                    for (var row = 0; row < data.length; row++) {
                        $("#BedNo").append('<option value=' + data[row].BedID + '>' + data[row].BedNO + ' </option>');
                    }
                }

            })
        })
        $("#BedNo").change(function () {
            debugger
            $("#BedID").val($(this).val());
        })


        //minlength: 1,
        //change: function (event, ui) {
        //    if (!ui.item) {
        //        this.value = '';
        //    }
        //},
        //select: function (event, i) {
        //    var show = i.item.id;
        //    $("#WardID").val(show);
        //},





        $("#ApplicableClass").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("WardName", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item.WardName, value: item.WardName, id: item.WardID
                            };

                        }))

                    }


                })
            },


            minlength: 1,
            //change: function (event, ui) {
            //    if (!ui.item) {
            //        this.value = '';
            //    }
            //},
            select: function (event, i) {
                var show = i.item.id;
                $("#ApplicableClassID").val(show);

            },



        })



        @*$("#RoomNo").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("RoomNo", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { Roomname: request.term, WardID: $("#WardID").val() },
                    success: function (data) {

                        for (var row = 0; row < data.length; row++) {
                            //  $(".fstlist").append('<div data-value=' + data[row].WardID + ' >' + data[row].WardName + '</div>');
                            $("#WardName").append('<option value=' + data[row].WardID + '>' + data[row].RoomNo + ' </option>')
                        }

                        response($.map(data, function (item) {

                            return {
                                label: item.RoomNo, value: item.RoomNo, id: item.RoomID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    this.value = '';

                }
            },
            select: function (event, i) {
                var show = i.item.id;
                $("#RoomID").val(show);
            },

        })*@


        @*$("#BedNo").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("BindBedNo", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { BedNo: request.term, RoomID: $("#RoomID").val() },
                    success: function (data) {

                        response($.map(data, function (item) {
                            return {
                                label: item.BedNO, value: item.BedNO, id: item.BedID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    this.value = '';

                }
            },
            select: function (event, i) {
                var show = i.item.id;
                $("#BedID").val(show);
            },

        })*@



        $("#OrganizationName").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("BindOrganization", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term, OPDIPDTYPE: $("input[name='colorRadio']:checked").val() },
                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item.OrganizationName, value: item.OrganizationName, id: item.OrganizationID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    this.value = '';

                }

                var id = ui.item.id;
                $("#OrganizationID").val(id);
                // alert(OPDIPDTYPE);
                if (OPDIPDTYPE == "") {
                    $("#TPAChk").text('TPA');
                }
            }


        })


        $("#TPAName").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("BindTPA", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {
                        debugger;
                        response($.map(data, function (item) {

                            return {
                                label: item.OrganizationName, value: item.OrganizationName, id: item.OrganizationID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            select: function (event, ui) {
                if (!ui.item) {
                    this.value = '';

                    $("#TPANameID").val(0);
                    $("#TPACheck").prop("checked", false);
                    $("#DepositeAmt").attr('readonly', false);
                    $("#SecurityDeposit").attr('readonly', true);

                }
                var id = ui.item.id;
                //if (id != "")
                //{
                //    $("#TPANameID").val(id);
                //    $("#TPACheck").prop("checked", "checked")
                //}
                debugger
                $("#TPANameID").val(id);
                $("#TPACheck").prop("checked", true)
                $("#TPAChk").text('TPA');


                debugger;
                if ($("#TPACheck").prop("checked", "checked")) {
                    $("#TPAChk").text('TPA');
                    $("#DepositeAmt").attr('readonly', true);
                    $("#SecurityDeposit").attr('readonly', false);
                }
                else {
                    $("#DepositeAmt").attr('readonly', false);
                    $("#SecurityDeposit").attr('readonly', true);

                }




            },



        })

        $("#InsuranceName").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("BindInsurance", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item.OrganizationName, value: item.OrganizationName, id: item.OrganizationID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    this.value = '';

                }

                var id = ui.item.id;
                $("#InsuranceID").val(id);
            }


        })



        $.ajax({
            url: '@Url.Action("BindPatientPrefix", "PatientOPD")',
            type: "GET",
            dataType: "json",
            data: { prefix: "" },
            success: function (data)
            {
                debugger
                $("#PFPatientNameID").val("");
                $("#PFPatientNameID").text("");
                for (var i = 0 ; i < data.length; i++)
                {
                    debugger
                    $("#PFPatientNameID1").val(data[0].PrefixName);
                    $("#PFPatientNameID").append('<option value=' + data[i].PrefixName + '> ' + data[i].PrefixName + '</option>')
                  //  $("#Gender").val(data[i].Gender);
                }



            }

        })

        $("#PFPatientNameID").change(function () {
            var type = $("#PFPatientNameID").val();
            debugger
            $.ajax({
                url: '@Url.Action("BindPatientPrefix", "PatientOPD")',
                type: "GET",
                dataType: "json",
                data: { prefix: type },
                success: function (data) {
                    debugger
                    //$("#PFPatientNameID").val("");
                    //$("#PFPatientNameID").text("");
                    for (var i = 0 ; i < data.length; i++) {
                        debugger
                        //$("#PFPatientNameID1").val(data[0].PrefixName);
                        //$("#PFPatientNameID").append('<option value=' + data[i].PrefixName + '> ' + data[i].PrefixName + '</option>')
                        $("#Gender").val(data[i].Gender);
                    }



                }

            })

            //alert($("#PFPatientNameID").val());
            //$("#Gender").val($(this).val());


        });





        $("#ReferredByDoctorName").autocomplete({

            source: function (request, response) {

                $.ajax({
                    url: '@Url.Action("RefferedDoctor", "PatientOPD")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item.DoctorPrintName, value: item.DoctorPrintName, id: item.DoctorID
                            };

                        }))

                    }


                })
            },


            minLength: 1,
            change: function (event, ui) {

                if (!ui.item) {
                    this.value = '';

                }

                var id = ui.item.id;
                $("#ReferredByDoctorID").val(id);


            }


        })

        //$("#ConsultantDoctorName,#ConsDr1").click(function () {
            debugger

           $("#ConsultantDoctorName,#ConsDr1").autocomplete({
             
                source: function (request, response) {
                    debugger
                    $.ajax({
                        url: '@Url.Action("ConsultantDoctor", "PatientOPD")',
                        type: "POST",
                        dataType: "json",
                        data: { prefix: "%" },
                        success: function (data) {

                            response($.map(data, function (item) {

                                return {
                                    label: item.DoctorPrintName, value: item.DoctorPrintName, id: item.DoctorID, DepartmentID: item.DepartmentID
                                };

                            }))

                        }


                    })
                },


                minLength: 1,
                change: function (event, ui) {

                    debugger
                    //var id = $(this).attr("id");
                    //if (id == "ConsDr1")
                    //{
                    //    $("#ConsDr1ID").val(ui.item.id)
                    //    return false;
                    //}
                    if (!ui.item) {
                        this.value = '';

                    }

                    var id = ui.item.id;
                    $("#ConsultantDoctorID").val(id);


                    debugger
                    var id = ui.item.DepartmentID;
                    $("#DepartMentID").val(id);

                    $.ajax({
                        type: "POST",

                        url: '@Url.Action("getFill_Department", "PatientOPD")',
                        data: '{DepartMentID: ' + JSON.stringify(id) + '}',
                        contentType: "application/json; charset=utf-8",

                        success: function (searchList) {

                            $("#DepartMentName").val(searchList[0]);

                        },

                    });






                }



               })


        function BindRoomBed() {

            $.ajax({
                url: '@Url.Action("RoomNo", "PatientOPD")',
                type: "POST",
                dataType: "json",
                data: { Roomname: "%", WardID: $("#WardID").val() },
                success: function (data) {
                    //$("#BedNo").val("");
                    //$("#BedNo").text("");
                    //$("#BedNo").append('<option value="-1 ">Select </option>')
                    //$("#RoomNo").val("");
                    //$("#RoomNo").text("");
                    //$("#RoomNo").append('<option value="-1 ">Select </option>')
                    for (var row = 0; row < data.length; row++) {
                        //  $(".fstlist").append('<div data-value=' + data[row].WardID + ' >' + data[row].WardName + '</div>');
                        $("#RoomNo").append('<option value=' + data[row].RoomID + '>' + data[row].RoomNo + ' </option>')
                    }
                }
            })



            $.ajax({
                url: '@Url.Action("BindBedNo", "PatientOPD")',
                type: "POST",
                dataType: "json",
                data: { BedNo: "%", RoomID: $("#RoomID").val() },
                success: function (data) {
                    // $("#BedNo").val("");
                    //$("#BedNo").text("");
                    //$("#BedNo").append('<option value="-1 ">Select </option>')
                    for (var row = 0; row < data.length; row++) {
                        $("#BedNo").append('<option value=' + data[row].BedID + '>' + data[row].BedNO + ' </option>');
                    }
                }

            })
        }
        $.ajax({
            url: '@Url.Action("GetServiceDetailsPackage", "PatientOPD")',
            type: "GET",
            dataType: "json",
            data: { prefix: "%" },
            success: function (data) {
                // $("#BedNo").val("");
                //$("#BedNo").text("");
                //$("#BedNo").append('<option value="-1 ">Select </option>')
                for (var row = 0; row < data.length; row++) {
                    debugger
                    $("#NameOfPackage").append('<option value=' + data[row].NameOfPackageID + '>' + data[row].NameOfPackage + ' </option>');
                }
            }

        })

        $("#OrganizationName").change(function () {
            // alert("abc");
           // $("#payment_type").val('CASHLESS');
            //  $("#payment_type").val('CASH');
        })
        $("#TPAName").change(function () {
            //   alert("abc");
             $("#payment_type").val('CASHLESS');
            //  $("#payment_type").val('CASH');
        })

        $.ajax({
            url: '@Url.Action("ConsultantDoctor", "PatientOPD")',
            type: "POST",
            dataType: "json",
            data: { prefix: "%" },
            success: function (data) {
                for (var row = 0; row < data.length; row++) {
                    debugger
                    $("#ConsDr1").append('<option value=' + data[row].DoctorID + '>' + data[row].DoctorPrintName + ' </option>');
                }
            }
        })
        $("#BtnShowPatientAppointDetail").click(function () {
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetOPDPatientAppointment", "PatientOPD")',
                dataType: "json",
                success: function (data) {
                    $("#dgvPatientappointRecord  tbody tr").remove();
                    debugger
                    var table = "";
                    var tr = "";
                    for (var i = 0; i < data.length; i++) {
                        debugger

                        // var SrNo = i + 1;
                        $("#dgvPatientappointRecord").append('<tr><td><input type="checkbox" id="chkappid" name="chkappid"></td><td>' + data[i].PatientAppointID + '</td><td>' + data[i].PatientName + '</td></tr>');

                    };
                    for (var j = 0; j < data.length; j++) {

                        if (data[j].PatientAppointID == data[j].ReferenceCode) {
                            //$("#chkappid").prop("checked", true);
                            document.getElementById('dgvPatientappointRecord').tBodies[0].rows[j].cells[0].children[0].checked = true;
                            document.getElementById('dgvPatientappointRecord').tBodies[0].rows[j].style.backgroundColor = "LightGreen";
                        }


                    }
                    //$("#PFPatientNameID").val(data[0].PFPatientName);
                    //$("#FirstName").val(data[0].PFirstName);
                    //$("#MiddleName").val(data[0].PMiddleName);
                    //$("#LastName").val(data[0].PLastName);
                    //$("#Gender").val(data[0].Gender);
                    //$("#RegNo").val(data[0].PatientRegNo);
                    //$("#ConsultantDoctorID").val(data[0].DoctorID);
                    //$("#MobileNo").val(data[0].MobileNo);
                    //$("#Year").val(data[0].Age);
                    //$("#DateOfBirth").val(data[0].DateOfBirth);

                }
            });
        })
        $("#dgvPatientappointRecord").delegate('td', 'click', function () {
            var row_num = parseInt($(this).parent().index());
            var PatientAppointID = parseInt(document.getElementById("dgvPatientappointRecord").tBodies[0].rows[row_num].cells[1].innerHTML);
            //   alert(PatientAppointID);
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetOPDPatientAppointmentDetails", "PatientOPD")',
                data: { PatientAppointID: PatientAppointID },
                dataType: "json",

                success: function (data) {
                    debugger
                    var table = "";
                    var tr = "";

                    // var SrNo = i + 1;
                    $("#PatientAppointmentID").val(data[0].PatientAppointID);

                    $("#PFPatientNameID1").val(data[0].PFPatientName);
                    $("#FirstName").val(data[0].PFirstName);
                    $("#MiddleName").val(data[0].PMiddleName);
                    $("#LastName").val(data[0].PLastName);
                    $("#Gender").val(data[0].Gender);

                    $("#RegNo").val(data[0].PatientRegNo);


                    $("#ConsultantDoctorID").val(data[0].DoctorID);
                    $("#ConsultantDoctorName").val(data[0].DoctorPrintName);
                    $("#MobileNo").val(data[0].MobileNo);
                    $("#Year").val(data[0].Age);
                    $("#DateOfBirth").val(data[0].DateOfBirth);

                },
                error: function (result) {
                    alert("Error grd bind");
                }
            });
        })

        var tpaname = "";
        var Mode = "";
        $("#dgvPatientRecord").delegate('td', 'click', function () {
            //$("#myModal1").modal('hide');
            $("#save").html("<i class='fa fa-save'></i>Update");

            $('#myModal1').modal('hide');
            $('body').removeClass('modal-open');
            $('.modal-backdrop').remove();
            //$("#myModal1").modal('hide');

            //$("#myModal1").modal('hide');

            $('#myModal1').modal('hide');
            $('body').removeClass('modal-open');
            $('.modal-backdrop').remove();

            debugger;
            $("#BedNo").val("");
            $("#BedNo").text("");
            $("#BedNo").append('<option value="-1 ">Select </option>')
            $("#RoomNo").val("");
            $("#RoomNo").text("");
            $("#RoomNo").append('<option value="-1 ">Select </option>')


            var row_num = parseInt($(this).parent().index());
            var PatientRegNO = parseInt(document.getElementById("dgvPatientRecord").tBodies[0].rows[row_num].cells[1].innerHTML);
            var Name = document.getElementById("dgvPatientRecord").tBodies[0].rows[row_num].cells[3].innerHTML;
            var PatientType = document.getElementById("dgvPatientRecord").tBodies[0].rows[row_num].cells[4].innerHTML;
            var PrintRegNo = document.getElementById("dgvPatientRecord").tBodies[0].rows[row_num].cells[2].innerHTML;
           // var PatientIPDNo = document.getElementById("PrintIPDNo").value;
            var WardID;
            var TPAID;
            if (PatientType == "IPD") {
                // $("input[name='colorRadio']").val("red");
                $("#Revisit").text("New Admission");
                $("#IPD").prop("checked", true);
                $("#IPDNOID").show();
                $("#OPDNOID").hide();
                $(".IPDBox").show();
                $("#IPDBox1").show();
                $("#TPACheck").show();
                $(".container1").show();
                $("#JointDr").show();
                $("#BtnShowPatientAppointDetail").hide();
                $("#IPDBillID").show();
                $("#OPDBillID").hide();
            }
            else {
                $("#Revisit").text("New Registration");
                $("#IPD").prop("checked", false);
                $("#IPDNOID").hide();
                $("#OPDNOID").show();
                $(".IPDBox").hide();
                $("#IPDBox1").hide();
                $("#JointDr").hide();
                $("#BtnShowPatientAppointDetail").show();
                $("#OPDBillID").show();
                $("#IPDBillID").hide();
                //  $("#TPACheck").hide();
            }
            if (PatientType == "OPD") {
                $("#Revisit").text("New Registration");
                $("#OPD").prop("checked", true);
                $("#OPDNOID").show();
                $("#IPDNOID").hide();
                $("#JointDr").hide();
                $("#BtnShowPatientAppointDetail").show();
                $("#OPDBillID").show();
                $("#IPDBillID").hide();
            }
            else {
                $("#Revisit").text("New Admission");
                $("#OPD").prop("checked", false);
                $("#OPDNOID").hide();
                $("#JointDr").hide();
                $("#BtnShowPatientAppointDetail").hide();
                $("#OPDBillID").hide();
                $("#IPDBillID").show();
            }

            @*$.ajax({
                type: "GET",
                url: '@Url.Action("EditPatient_OPDDetail", "PatientOPD")',
                data: { PatientRegNO: PatientRegNO, PatientType: PatientType },
                dataType: "json",
                success: function (data) {
                    debugger


                    if (data[0].Message == "Patient already Exists in IPD. So you can not revisit without discharge.") {
                        alert(data[0].Message);
                        return false;
                    }

                    $("#PFPatientNameID").val(data[0].PFPatientName);
                    $("#PrintRegNo").val(PrintRegNo);
                    $("#FirstName").val(data[0].PFirstName);
                    $("#MiddleName").val(data[0].PMiddleName);
                }
            })*@

            var IPDNO="";
            $.ajax({
                type: "GET",
                url: '@Url.Action("EditPatient_OPDDetail", "PatientOPD")',
                data: { PatientRegNO: PatientRegNO, PatientType: PatientType },
                dataType: "json",
                success: function (data) {
                    debugger


                    if (data[0].Message == "Patient already Exists in IPD. So you can not revisit without discharge.") {
                        alert(data[0].Message);
                        return false;
                    }

                    $("#PFPatientNameID").val(data[0].PFPatientName);
                  //  $("#PntID").show();
                    $("#PrintRegNo").val(PrintRegNo);
                    $("#PrtRegNo").text(PrintRegNo);
                    $("#FirstName").val(data[0].PFirstName);
                    $("#MiddleName").val(data[0].PMiddleName);
                    $("#LastName").val(data[0].PLastName);
                    $("#Gender").val(data[0].Gender);
                    $("#RegNo").val(data[0].PatientRegNo);
                    $("#BP").val(data[0].BloodPressure);
                    $("#GuardianName").val(data[0].GuardianName);
                    $("#Country").val(data[0].CountryName);
                    $("#State").val(data[0].StateName);
                    $("#CityName").val(data[0].CityName);
                
                    $("#RegistrationDate").val(data[1].PatientRegistrationDate);
                    $("#RegistrationTime").val(data[1].time);
                    if (data[1].TemporaryDoctorStatus == "True") {
                        $("#TemporaryDoctorID").prop("checked", true);
                     
                        TemporaryDoctor();
                        $("#TemporaryDoctorText").val(data[1].TemporaryDoctor);

                    }
                    else {
                        $("#TemporaryDoctorID").prop("checked", false);
                        TemporaryDoctor();

                    }

                  

                    if (data[1].RefferedTemporaryDoctorStatus == "True") {
                        $("#RefferedTemporaryDoctorID").prop("checked", true);
                        RefferedTemporaryDoctor();
                        $("#RefferedTemporaryDoctorText").val(data[1].RefferedTemporaryDoctor);

                    }
                    else {
                        $("#RefferedTemporaryDoctorID").prop("checked", false);
                        RefferedTemporaryDoctor();
                    }
                   
                    $("#OPDImage3").val(data[0].Photo);
                    document.getElementById('img1').src = data[0].Photo;
                    $("#Address").val(data[0].Address);


                    $("#Country").val(data[0].CountryName);
                    $("#CityID").val(data[0].CityID);
                    $("#StateID").val(data[0].StateID);
                    $("#CountryID").val(data[0].CountryID);
                    $("#CityName").val(data[0].CityName);
                    $("#State").val(data[0].StateName);

                    $("#Height").val(data[0].Height);
                    $("#AadhaarNo").val(data[0].AadhaarNo);
                    $("#PhoneNumber").val(data[0].PhoneNo);
                    if (data[0].PatientCancel == "true") {
                        $("#PatientCancelID").prop("checked", true);
                    }
                    else {
                        $("#PatientCancelID").prop("checked", false);
                    }
                    $("#PatientCancelText").val(data[0].PatientCancelReason);
                    $("#MobileNo").val(data[0].MobileNo);
                    $("#Year").val(data[0].Age);
                    $("#DateOfBirth").val(data[0].DateOfBirth);
                    CalGetDaysAge();


                    $("#PanCardNo").val(data[0].PanCardNo);
                    $("#EmailID").val(data[0].EmailID);
                    $("#Pincode").val(data[0].PinCode);
                    $("#Source").val(data[0].Source);
                    //if (data[1].printRegNo>0)
                    //{
                   
                   //     $("#PntID").text(data[1].printRegNo);
                    //}
                    
                   
                    $("#PatientIPDNO").val(data[1].PatientIPDNO);
                    $("#PatientOPDNO").val(data[1].PatientOPDNO);
                    $("#PrintOPDNo").text(data[1].PrintOPDNo);
                    $("#PrintIPDNo").text(data[2].PrintIPDNO);
                    //   $("#OPDNOID").val(data[1].PrintOPDNo);
                    $("#DepartMentID").val(data[1].DepartmentID);
                    $("#DepartMentName").val(data[1].DepartmentName);
                    // alert(data[1].DoctorID);
                    $("#ConsultantDoctorID").val(data[1].DoctorID);
                    $("#ReferredByDoctorID").val(data[1].ReferredByDoctorID);
                    $("#ConsultantDoctorName").val(data[1].DoctorPrintName);
                    $("#ReferredByDoctorName").val(data[1].ReferredByDoctorName);
                    $("#Weight").val(data[1].Weight);
                    Mode = "Edit";
                    $("#ClaimNo").val(data[1].CCNClaimNo);
                    $("#PolicyNo").val(data[1].PolicyNo);
                    $("#Reason").val(data[1].Reason);
                    $("#MediclaimcardID").val(data[1].MediclaimCardID)
                    $("#Elective_Surgery").val(data[1].Elective_Surgery);
                    $("#PatientCategory").val(data[1].PatientCategory);
                    $("#Medical_Management").val(data[1].Medical_Management);
                    $("#NameOfPackage").val(data[1].NameOfPackage);
                 

                    tpaname = data[1].TPA_Name;
                    IPDNO = data[1].PatientIPDNO;
                    $("#OrganizationID").val(data[1].OrganizationID);
                    $("#OrganizationName").val(data[1].OrganizationName);
                   // alert(data[0].AdvanceAmt);
                    $("#DepositeAmt").val(data[1].AdvanceAmt);
                    $("#InsuranceID").val(data[1].InsuranceCompnyID);
                    $("#InsuranceName").val(data[1].InsuranceCompny);
                  //  alert(data[1].PaymentType);
                   
                    $("#Number").val(data[1].Number);
                    $("#Name").val(data[1].Name);
                    $("#paymentDate").val(data[1].Date);
                    $("#Remarks").val(data[1].Remark);
                    TPAID = data[1].TPA_ID;
                    $("#payment_type").val(data[1].PaymentType);
                    $("#Number").val(data[1].Number);
                    $("#Name").val(data[1].Name);
                    $("#paymentDate").val(data[1].Date);
                    $("#Remarks").val(data[1].Remark);
                  PaymentMode();
                 
                    if (PatientType == "IPD")
                    {

                    
                    $.ajax({
                        type: "GET",
                        url: '@Url.Action("GetPatientIPDWardDetailsForEdit", "PatientOPD")',
                        data: { PatientRegNO: PatientRegNO, PatientIPDNO: $("#PatientIPDNO").val() },
                        dataType: "json",
                        success: function (data) {
                            debugger

                            $("#ApplicableClass").val(data[0].ApplyWardName);
                            $("#ApplicableClassID").val(data[0].ApplyWardID);
                            $("#WardID").val(data[0].WardID);

                            $("#BedID").val(data[0].BedID);
                            $("#RoomID").val(data[0].RoomID);
                            $("#Wardname").append('<option value=' + data[0].WardID + '>' + data[0].WardName + ' </option>');
                            $("#RoomNo").append('<option value=' + data[0].RoomID + '>' + data[0].RoomNo + ' </option>');
                            $("#BedNo").append('<option value=' + data[0].BedID + '>' + data[0].BedNO + ' </option>');
                            document.getElementById("RoomNo").selectedIndex = "1";
                            document.getElementById("BedNo").selectedIndex = "1";
                            $("#Wardname").val(data[0].WardID);
                            BindRoomBed();
                            if (data[0].BedCharges != "") {
                                $("#Wardname").prop('disabled', 'disabled');
                                $("#RoomNo").prop('disabled', 'disabled');
                                $("#BedNo").prop('disabled', 'disabled');
                                $("#RegistrationDate").prop('disabled', false);

                    }
                    else {
                                $("#Wardname").prop('disabled', false);
                                $("#RoomNo").prop('disabled', false);
                                $("#BedNo").prop('disabled', false);
                                $("#RegistrationDate").prop('disabled', false);

                    }

                            $("#BedNo").val(data[0].BedID);
                            $("#RoomNo").val(data[0].RoomID);


                        //  $("#BtnShowPatientAppointDetail").show();




                        //$("#ConsDr1").val(data[1].ConsDr1);



                    }
                    })
                        }
                    if (data[1].TPA_ID != 0) {
                        $("#TPACheck").prop("checked", true);
                        $("#DepositeAmt").attr('readonly', true);
                        $("#TPAName").val(data[1].TPA_Name);
                        $("#TPANameID").val(data[1].TPA_ID);
                        $("#TPAChk").text('TPA');
                        
                        if(PatientType=="IPD")
                        {
                            debugger
                            $.ajax({
                                type: "GET",
                                url: '@Url.Action("GetSecurityDeposite", "PatientOPD")',
                                data: { PatientRegNO: PatientRegNO },
                                dataType: "json",
                                success: function (data) {
                                    debugger
                                  
                                        $("#SecurityDeposityID").val(data[0].SecurityDeposityID);
                                       
                                        $("#SecurityDeposit").val(data[0].CrAmount);
                                       
                                        IPDNO = data[0].OPDIPDID;
                                        
                                }

                            })
                          //  alert(IPDNO);
                            

                        $("#DepositeAmt").attr('readonly', true);
                        $("#SecurityDeposit").attr('readonly', false);
                       

                        }


                    }
                    else {
                        $("#TPACheck").prop("checked", false);
                        if (PatientType == "IPD")
                        {
                            $("#DepositeAmt").attr('readonly', false);
                            $("#SecurityDeposit").attr('readonly', true);
                        }
                    }
                   
                   
                    debugger
                    if (PatientType == "IPD") {
                        $("#BtnShowPatientAppointDetail").hide();
                        $("#JointDr").show();

                        debugger
                        //if (data[3].WardID != null)
                        //{
                        //    $("#ApplicableClass").val(data[3].ApplyWardName);
                        //    $("#ApplicableClassID").val(data[3].ApplyWardID);
                        //    $("#WardID").val(data[3].WardID);
                        //    $("#RegistrationDate").val(data[1].PatientRegistrationDate);
                        //    $("#RegistrationTime").val(data[1].time);
                        //    // WardID = data[3].WardID;
                        //    $("#BedID").val(data[3].BedID);
                        //    $("#RoomID").val(data[3].RoomID);
                        //    $("#Wardname").append('<option value=' + data[3].WardID + '>' + data[3].WardName + ' </option>');
                        //    $("#RoomNo").append('<option value=' + data[3].RoomID + '>' + data[3].RoomNo + ' </option>');
                        //    $("#BedNo").append('<option value=' + data[3].BedID + '>' + data[3].BedNO + ' </option>');
                        //    document.getElementById("RoomNo").selectedIndex = "1";
                        //    document.getElementById("BedNo").selectedIndex = "1";
                        //    $("#Wardname").val(data[3].WardID);
                        //    BindRoomBed();
                        //    //if (data[3].BedCharges != "")
                        //    //{
                        //    //    $("#Wardname").prop('disabled', 'disabled');
                        //    //    $("#RoomNo").prop('disabled', 'disabled');
                        //    //    $("#BedNo").prop('disabled', 'disabled');
                        //    //    $("#RegistrationDate").prop('disabled', false);

                        //    //}
                        //    //else {
                        //        $("#Wardname").prop('disabled', false);
                        //        $("#RoomNo").prop('disabled', false);
                        //        $("#BedNo").prop('disabled', false);
                        //        $("#RegistrationDate").prop('disabled', false);

                        //    //}

                        //    $("#BedNo").val(data[3].BedID);
                        //    $("#RoomNo").val(data[3].RoomID);


                        //    //  $("#BtnShowPatientAppointDetail").show();
                            



                        //    $("#ConsDr1").val(data[1].ConsDr1);

                        //    $("#DepositeAmt").val(data[1].AdvanceAmt);
                        //}
                        //else
                        //{
                            

                        //    $("#ConsDr1").val(data[1].ConsDr1);

                        //    $("#ApplicableClass").val(data[4].ApplyWardName);
                        //    $("#ApplicableClassID").val(data[4].ApplyWardID);
                        //    $("#WardID").val(data[4].WardID);
                        //    $("#RegistrationDate").val(data[1].PatientRegistrationDate);
                        //    $("#RegistrationTime").val(data[1].time);
                        //    // WardID = data[3].WardID;
                        //    $("#BedID").val(data[4].BedID);
                        //    $("#RoomID").val(data[4].RoomID);
                        //    $("#Wardname").append('<option value=' + data[4].WardID + '>' + data[4].WardName + ' </option>');
                        //    $("#RoomNo").append('<option value=' + data[4].RoomID + '>' + data[4].RoomNo + ' </option>');
                        //    $("#BedNo").append('<option value=' + data[4].BedID + '>' + data[4].BedNO + ' </option>');
                        //    document.getElementById("RoomNo").selectedIndex = "1";
                        //    document.getElementById("BedNo").selectedIndex = "1";
                        //    $("#Wardname").val(data[4].WardID);
                        //    BindRoomBed();
                        //    //if (data[4].BedCharges != "") {
                        //    //    $("#Wardname").prop('disabled', 'disabled');
                        //    //    $("#RoomNo").prop('disabled', 'disabled');
                        //    //    $("#BedNo").prop('disabled', 'disabled');
                        //    //    $("#RegistrationDate").prop('disabled', false);

                        //    //}
                        //    //else {
                        //        $("#Wardname").prop('disabled', false);
                        //        $("#RoomNo").prop('disabled', false);
                        //        $("#BedNo").prop('disabled', false);
                        //        $("#RegistrationDate").prop('disabled', false);

                        //    //}

                        //    $("#BedNo").val(data[4].BedID);
                        //    $("#RoomNo").val(data[4].RoomID);


                        //    //  $("#BtnShowPatientAppointDetail").show();

                        //    $("#DepositeAmt").val(data[2].AdvanceAmt);
                        //}

                        }
                   

                  
                    
                  


                   
                





                    return false;
                },
            });



        })
        var Yes = "";
        $("#TPAName").change(function () {
            debugger
            if (Mode == "Edit") {


                if ($(this).val() != null && $(this).val() != "") {
                    $("#DepositeAmt").val("");

                    var ans = confirm("Do you want to change Rate according to TPA wise?");
                    if (ans) {
                        Yes = true;
                    }
                    else {

                        Yes = false;
                    }
                }
                else {
                    var ans = confirm("Do you want to change Rate according to General Rate?");
                    if (ans) {
                        Yes = true;
                    }
                    else {

                        Yes = false;
                    }
                }
            }
        });
        var Number1, Name1, paymentDate1, Remarks1;
        var chk = true;
        function PaymentMode() {
            debugger
            var select = document.getElementById("payment_type").value;
            var Number, Name, paymentDate, Remarks;

            Number = $("#Number").val();
            Name = $("#Name").val();
            paymentDate = $("#paymentDate").val();
            Remarks = $("#Remarks").val();


            if ($("#HiddenPayment").val() == $("#payment_type").val()) {


                //Number1 = $("#Number").val();
                //Name1 = $("#Name").val();
                //paymentDate1 = $("#paymentDate").val();
                //Remarks1 = $("#Remarks").val();


                $("#Number").val(Number1);
                $("#Name").val(Name1);
                $("#paymentDate").val(paymentDate1);
                $("#Remarks").val(Remarks1);
            }
            else {

                if (Mode == "Edit") {

                    $("#Number").val(Number);
                    $("#Name").val(Name);
                    $("#paymentDate").val(paymentDate);
                    $("#Remarks").val(Remarks);
                }
                else {
                    Number = "";
                    Name = "";
                    ////paymentDate = "";
                    Remarks = "";
                    $("#Number").val(Number);
                    $("#Name").val(Name);
                    $("#paymentDate").val(paymentDate);
                    $("#Remarks").val(Remarks);

                }

            }
            switch (select) {
                case 'Cheque':
                    $("#DoctorSaveDivs").show(300);
                    $("#PaymentNo1").text("Cheque No");


                    $("#paymentName1").text("Bank Name");

                    $("#paymentDate1").text("Cheque Date");

                    $("#paymentRemark1").text("Remark");
                    break;


                case 'Debit Card':
                    $("#DoctorSaveDivs").show(300);
                    $("#PaymentNo1").text("Debit Card No");


                    $("#paymentName1").text("Holder Name");

                    $("#paymentDate1").text("Valid UPTO");

                    $("#paymentRemark1").text("Remark");
                    break;



                case 'Credit Card':
                    $("#DoctorSaveDivs").show(300);
                    $("#PaymentNo1").text("Credit Card No");
                    $("#paymentName1").text("Holder Name");
                    $("#paymentDate1").text("Valid UPTO");
                    $("#paymentRemark1").text("Remark");
                    break;

                case 'E-money':
                    $("#DoctorSaveDivs").show(300);
                    $("#PaymentNo1").text("Mobile No.");
                    $("#paymentName1").text("Payment Type");
                    $("#paymentDate1").text("Date");
                    $("#paymentRemark1").text("Remark");
                    break;

                case 'EFT':
                    $("#DoctorSaveDivs").show(300);
                    $("#PaymentNo1").text("Code");
                    $("#paymentName1").text("Bank Name");
                    $("#paymentDate1").text("Date");
                    $("#paymentRemark1").text("Remark");
                    break;

                case 'Cash':

                    $("#DoctorSaveDivs").hide(300);
                    break;
            }



        }
        $("#payment_type").change(function () {

            debugger
            //if ($("#HiddenPayment").val() == $(this).val()) {
            PaymentMode();
            // }
            // else
        });
        $("#paysave").click(function () {

            $("#DoctorSaveDivs").hide();
            var select = document.getElementById("payment_type").value;

            $("#HiddenPayment").val(select);
            // alert($("#HiddenPayment").val());
            if (chk) {
                chk = false;
                Number1 = $("#Number").val();
                Name1 = $("#Name").val();
                paymentDate1 = $("#paymentDate").val();
                Remarks1 = $("#Remarks").val();
            }
            //alert("Payment Details Save");
        });

        //$("#TPAName").change(function () {
        //    debugger



        //    // TPAWiseRate();
        //})
        $("#Form1").on("submit", function () {
            debugger
            //$("#TPAName").change(function () {
            //})
            debugger
            if (Yes == true) {
                TPAWiseRate();
            }


        })


        $("#TemporaryDoctorID").click(function () {
            TemporaryDoctor();
        })

        function TemporaryDoctor() {
            var chk = document.getElementById("TemporaryDoctorID").checked;
            debugger
            //  $("#TemporaryDoctorText").val("");
            if (chk == true)
            {
                $("#LabelTemporaryID").show();
                $("#labelConsultantDoctorID").hide();
                $("#ConsultantDoctorID").val("");
                $("#ConsultantDoctorName").val("");
                $("#ConsultantDoctorName").hide();
                $("#DepartMentName").hide();
                $("#DepartMentName").val("");
                $("#DepartMentID").val("");
                $("#depar").hide();
            }

            else
            {
                $("#LabelTemporaryID").hide();
                $("#labelConsultantDoctorID").show();
                $("#TemporaryDoctorText").val();
                $("#ConsultantDoctorName").show();
                $("#DepartMentName").show();
                $("#depar").show();
            }
        }




        $("#RefferedTemporaryDoctorID").click(function () {

            RefferedTemporaryDoctor();

        });




        function RefferedTemporaryDoctor() {
            var chk = document.getElementById("RefferedTemporaryDoctorID").checked;
            debugger
            //  $("#RefferedTemporaryDoctorText").val("");
            if (chk == true) {
                $("#refTemporaryID").show();
                $("#ReferredByDoctorName").hide();
                $("#ReferredByDoctorID").val("");
                $("#ReferredByDoctorName").val("");
                
            }
            else {
                $("#refTemporaryID").hide();
                $("#ReferredByDoctorName").show();
                $("#RefferedTemporaryDoctorText").val();
            }
        }




    });


    $(document).ready(function () {
        $("#myModal").show();
        $("#btnClear").click(function () {
            $("#OPDImage3").val("");
            document.getElementById('img1').src = "";
        })
    })
    var loadfile = function (event, name) {
        debugger


        var file = event.target.files[0];
        if (name == "OPDImage3") {
            document.getElementById('img1').src = window.URL.createObjectURL(event.target.files[0]);
            // alert(window.URL.createObjectURL(event.target.files[0]));
        }

        // alert(window.URL.createObjectURL(event.target.files[0]));
        var data = new FormData();
        data.append("ImageFile", file);
        // data.append("DoctorImage", name);
        $.ajax({
            url: '@Url.Action("imageuplod", "PatientOPD")',
            type: "POST",
            data: data,
            contentType: false,
            processData: false,
            success: function (data) {
                debugger
                // var img = document.getElementById("img")
                $("#OPDImage3").val(data);
            }
        });

    }



 

    $(document).ready(function () {
        $("#patientdataclose").hide();
        //$("#patient_reg_no_id").focus();

        $("#DoctorSaveDivs").hide();

        $("#cl").click(function () {

            $("#DoctorSaveDivs").hide();
            $("#payment_type").val('Cash');
            //$("#Number").val('');
            //$("#Name").val('');
            //$("#paymentDate").val('');
            //$("#Remarks").val('');
        });
       
       

    });

</script>
<script>
$(document).ready(function(){

    $("#MobileNo").on("blur", function () {
        debugger
        var mobNum = $(this).val();
        var filter = /^\d*(?:\.\d{1,2})?$/;

          if (filter.test(mobNum)) {
            if(mobNum.length==10){
                  //alert("valid");
              $("#mobile-valid").removeClass("hidden");
              $("#folio-invalid").addClass("hidden");
             } else {
                alert('kindly enter 10 digit mobile number');
               $("#folio-invalid").removeClass("hidden");
               $("#mobile-valid").addClass("hidden");
                return false;
              }
            }
            else {
              alert('Not a valid number');
              $("#folio-invalid").removeClass("hidden");
              $("#mobile-valid").addClass("hidden");
              return false;
           }

    });

    $("#PanCardNo").on("blur", function () {
        debugger
        var mobNum = $(this).val();


        if ((mobNum)) {
            if (mobNum.length == 10) {

                $("#mobile-valid").removeClass("hidden");
                $("#folio-invalid").addClass("hidden");
            } else {
                alert('kindly enter 10 digit Pan number');
                $("#folio-invalid").removeClass("hidden");
                $("#mobile-valid").addClass("hidden");
                return false;
            }
        }
        else {
            alert('Not a valid number');
            $("#folio-invalid").removeClass("hidden");
            $("#mobile-valid").addClass("hidden");
            return false;
        }

    });

    $("#Pincode").on("blur", function () {
        debugger
        var mobNum = $(this).val();
        var filter = /^\d*(?:\.\d{1,2})?$/;

        if (filter.test(mobNum)) {
            if (mobNum.length == 6) {
                //alert("valid");
                $("#mobile-valid").removeClass("hidden");
                $("#folio-invalid").addClass("hidden");
            } else {
                alert('kindly enter 6 digit Pin Code');
                $("#folio-invalid").removeClass("hidden");
                $("#mobile-valid").addClass("hidden");
                return false;
            }
        }
        else {
            alert('Not a valid number');
            $("#folio-invalid").removeClass("hidden");
            $("#mobile-valid").addClass("hidden");
            return false;
        }

    });

});
</script>
<script type="text/javascript">

    $(function () {

        var d = new Date(),
            h = d.getHours(),
            m = d.getMinutes();
        if (h < 10) h = '0' + h;
        if (m < 10) m = '0' + m;
        $('input[type="time"][value="now"]').each(function () {
            $(this).attr({ 'value': h + ':' + m });

        });
    });

    $(document).ready(function () {

        $.ajax({
            type: "GET",
            //  contentType: "application/json; charset=utf-8",
            url: '@Url.Action("GetAllPatient", "PatientOPD")',
            //data: "{}",
            dataType: "json",
            success: function (data) {
                $("#dgvPatientRecord tbody tr").remove();
                var SrNo = 1;
                for (var i = 0; i < data.length; i++) {
                    $("#dgvPatientRecord").append('<tr><td>' + SrNo + '</td><td style="display:none">' + data[i].PatientRegNo + '</td><td>' + data[i].printRegNo + '</td><td>' + data[i].PatientName + '</td><td>' + data[i].PatientType + '</td></tr>');
                    //  <td><a href=""><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a></td>
                    SrNo++;
                };
            },

        });
        function CalGetDaysAge() {

            $.ajax({
                url: '@Url.Action("CalGetDaysAge", "PatientOPD")',
                type: "GET",
                data: { datebirth: $("#DateOfBirth").val() },
                dataType: "json",
                success: function (data) {
                    // $("#DateOfBirth").val(data);
                    $("#Day").val(data[0].day);

                    $("#Month").val(data[0].Month);

                    $("#Year").val(data[0].year);
                }
            })
        }
        $("#DateOfBirth").change(function () {
            debugger
            CalGetDaysAge();

        })

        var date = new Date();

        $("#Day").keyup(function () {
            debugger
            var fromDate = new Date();
            // var date = new Date(fromDate).toDateString('yyyy-MM-dd');
            //// $("#DateOfBirth").val(date.);
            // document.getElementById("DateOfBirth").value = fromDate.toString("yyyy-MM-dd");
            var date = new Date();
            debugger;
            var days = parseInt($("#Day").val(), 10);

            var month = parseInt($("#Month").val(), 10);

            var year = parseInt($("#Year").val(), 10);

            var date = new Date();
            if (days == "NaN") {
                days = 0;
            }
            if (days > 0) {
                var dat = date.setDate(date.getDate() - parseInt(days));
            }
            if (year > 0) {
                var b = date.setFullYear(date.getFullYear() - year);
            }
            if (month > 0) {
                var m = date.setMonth(date.getMonth() - month);
            }

            d = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();



            $.ajax({
                url: '@Url.Action("BindCaculteAge", "OPDBill")',
                type: "GET",
                data: { date: d },
                dataType: "json",
                success: function (data) {
                    $("#DateOfBirth").val(data);
                }
            })


            //  $("#DateOfBirth").val(date.toLocaleDateString("indian"));
            debugger

            year = "";


            if ($("#Year").val() == "" && $("#Month").val() == "" && $("#Day").val() == "") {

                $("#DateOfBirth").val(date.toString("yyyy-MM-dd"));

            }
        })

        $("#Month").keyup(function () {
            debugger;

            // $.get("/Add_Patient_Registration/Day", { name: month, Birth: "Month" }, function (data) {
            date = new Date();
            debugger;


            var days = parseInt($("#Day").val(), 10);

            var month = parseInt($("#Month").val(), 10);

            var year = parseInt($("#Year").val(), 10);

            if (month > 0) {
                date.setMonth(date.getMonth() - month);
            }
            if (year > 0) {
                var b = date.setFullYear(date.getFullYear() - year);
            }
            if (days > 0) {
                date.setDate(date.getDate() - days);
            }

            d = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();

            $.ajax({
                url: '@Url.Action("BindCaculteAge", "OPDBill")',
                type: "GET",
                data: { date: d },
                dataType: "json",
                success: function (data) {
                    $("#DateOfBirth").val(data);
                }
            })


            year = "";




            if ($("#Year").val() == "" && $("#Month").val() == "" && $("#Day").val() == "") {

                $("#DateOfBirth").val(date.toString('dd M yy'));
            }

        })



        $("#Year").keyup(function () {
            debugger;
            date = new Date();
            var days = parseInt($("#Day").val(), 10);

            var month = parseInt($("#Month").val(), 10);

            var year = parseInt($("#Year").val(), 10);

            if (year > 0) {
                var b = date.setFullYear(date.getFullYear() - year);
            }
            if (month > 0) {
                date.setMonth(date.getMonth() - month);
            }
            if (days > 0) {
                date.setDate(date.getDate() - days);
            }
            d = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();

            $.ajax({
                url: '@Url.Action("BindCaculteAge", "OPDBill")',
                type: "GET",
                data: { date: d },
                dataType: "json",
                success: function (data) {

                    $("#DateOfBirth").val(data);
                }
            })


            year = "";

            if ($("#Year").val() == "" && $("#Month").val() == "" && $("#Day").val() == "") {

                $("#DateOfBirth").val(date.toString('dd M yy'));

            }


        })



    })

    function ValidationEvent() {
        debugger;

        var IPDChk = document.getElementById("IPD").checked;

        if (IPDChk) {
            var ward = $("#Wardname").val();

            var bed = $("#RoomNo").val();
            var room = $("#BedNo").val();
            //if ($("#Wardname").val() == null)
            //{
            //    alert("Ward ,RoomNo,BedNo cannot be Empty..");
            //    return false;
            //}

            $("#Wardname").prop('disabled', false);
            $("#RoomNo").prop('disabled', false);
            $("#BedNo").prop('disabled', false);
            $("#RegistrationDate").prop('disabled', false);
            if ($("#Wardname").val() == null || $("#Wardname").val() == -1 || $("#RoomNo").val() == "" || $("#RoomNo").val() == null || $("#BedNo").val() == "" || $("#BedNo").val() == null) {

                alert("Ward ,RoomNo,BedNo cannot be Empty..");
                return false;
            }

        }

        //if ($("#TPAName").val() > 0 || $("#TPAName").val() != null || $("#TPAName").val() != "") {

        //}

    }


    function TPAWiseRate() {
        debugger
        if ($("#RegNo").val() > 0) {
           

            debugger

            if ($("#TPAName").val() != null && $("#TPAName").val() != "") {
             //   alert($("#TPAName").val());
                $("#TPAChk").text('TPA');
                $("#TPACheck").prop("checked", true);

                //var ans = confirm("Do you want to change Rate according to  TPA wise?");
                //if (ans)
                //{
                $.ajax({
                    type: "POST",
                  
                    url: '@Url.Action("EditTPAWiseBills", "PatientOPD")',
                    data: { PatientRegNo: $("#RegNo").val(), PatientIPDNo: $("#PatientIPDNO").val(), TPAID: $("#TPANameID").val(), WardID: $("#WardID").val() },
                    dataType: "json",
                    success: function (data) {
                        if (data == "Reason Deleted Successfully") {
                            alert("Reason Deleted Successfully");
                            window.location.reload(true);
                        }
                        else {
                            alert(data);
                        }
                    },
                    error: function (errormessage) {
                      //  alert(errormessage.responseText);
                    }
                });
                //}

            }
            else {
                debugger
                //var ans = confirm("Do you want to change Rate according to General wise?");
                //debugger
                //if (ans) {
                $.ajax({
                    type: "POST",
                    //url: "/Department/DeleteDepartment?DepartmentID=" + DepartmentID,
                    url: '@Url.Action("EditTPAWiseBills", "PatientOPD")',
                    data: { PatientRegNo: $("#RegNo").val(), PatientIPDNo: $("#PatientIPDNO").val(), WardID: $("#WardID").val() },
                    dataType: "json",
                    success: function (data) {
                        //if (data == "Reason Deleted Successfully") {
                        //    alert("Reason Deleted Successfully");
                        //    window.location.reload(true);
                        //}
                        //else {
                        //    alert(data);
                        //}
                    },
                    error: function (errormessage) {
                       // alert(errormessage.responseText);
                    }
                });
                //}
            }

        }

    }

</script>
<script>

    $(document).ready(function () {
      

        $("#FirstName").click(function () {
          
          //  $("#patientNameTable").show();
            $('#patientNameTable').slideDown();
            $("#patientdataclose").show();
            var type = $("input[name='colorRadio']").val();
            PatientDetail(type);
        })


        $("input[name='colorRadio']").click(function () {
          //  alert($(this).val());
           
           
                PatientDetail($(this).val());
           
           
        })
        function PatientDetail(type)
       {
           $.ajax({
               url: '@Url.Action("GetIPDPatient", "PatientOPD")',
               contentType: "application/json; charset=utf-8",
               type: "GET",
               dataType: "json",
               data: { prefix: "%", outside: type },
               success: function (result) {
                   debugger
                   $("#patientNameTable tbody tr").remove();
                   $.each(result, function (i, obj) {
                       $("#patientNameTable").append('<tr><td>' + obj.PrintRegNO + '</td><td style="display:none">' + obj.patientregNo + '</td><td>' + obj.patientname + '</td><td>' + obj.address + '</td><td>' + obj.contactno + '</td></tr>')

                   });
                   debugger
               }
           });
       }

        $("#patientNameTable").delegate('td', 'click', function () {
            debugger;
            var row = $(this).parent().index();
            var Print = document.getElementById('patientNameTable').tBodies[0].rows[row].cells[0].innerHTML;
            $("#PrintRegNo").val(Print);
            $("#PrintRegNo").change();
            $('#patientNameTable').slideUp();

        });

        $("#FirstName").on("keyup", function () {
            debugger
            var value = $(this).val().toLowerCase();
            $("#patientNameTable tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    })
</script>

@if (TempData["Msg"] != null)
{
    <script type="text/javascript">
        alert(@Html.Raw(Json.Encode(TempData["Msg"])));
        window.onload(true);
        Restor();
    </script>
}
<script>

    $(document).ready(function () {

        $("#modalOPD").click(function () {
            debugger;
            $("#Search").val($(this).val());
            //  $("#Search").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            //$("#myModal1 tbody tr").filter(function () {
            $("#myModal1 tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            })
            //    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            // });
        })

        $("#Search").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myModal1 tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        //$("#modalOPD").click(function () {
        //    debugger;

        //    $("#Search").val($(this).val());
        //    var value = $(this).val().toLowerCase();
        //    $("#myModal1 tbody tr").filter(function () {
        //        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        //    });
        //})
        
        //$("body").click(function () {
        //    debugger
        //  $(".patientTableDiv").hide();
        //  //  $('#patientNameTable').slideUp();
        //})

        $("#patientdataclose").click(function () {
            $("#patientNameTable").hide();
            $("#patientdataclose").hide();
        })

        $("#modalIPD").click(function () {
            debugger;

            $("#Search").val($(this).val());
            var value = $(this).val().toLowerCase();
            $("#myModal1 tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        })
        //$("#Search").on("keyup", function () {
        //    var value = $(this).val().toLowerCase();
        //    $("#myModal1 tr").filter(function () {
        //        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        //    });
        //});
        $("#SearchAppoint").on("keyup", function () {
            // $("#SearchAppoint").val($(this).val());
            var value = $(this).val().toLowerCase();
            $("#myModal2 tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        $.ajax({
            url: '@Url.Action("GetCategory", "PatientOPD")',
            type: "POST",
            dataType: "json",
            data: { prefix: "%" },
            success: function (data) {
                debugger
                $('#PatientCategory').append('<option value="0">Select</option>');
                // $('#DoctorName option:not(:first)').remove();
                for (var i = 0; i < data.length; i++) {
                    debugger
                    $("#PatientCategory").append($("<option value=" + data[i].PatientTypeID + ">" + data[i].PatientType + "</option>"));

                }
            }
        })

        //$("#FirstName").click(function () {
        //    $('#patientNameTable').slideDown();
        //})
    })


</script>


<script>

    function sticker() {
        debugger               
        var ipdno = $("#PatientIPDNO").val();        
        var regno = $("#RegNo").val();      
        var qty = $("#sticker").val();
                $.ajax({
                    type: "POST",
                    //url: "/Doctor/DeleteDoctor?DoctorID=" + DoctorID,
                    url: '@Url.Action("Print_sticker", "PatientOPD")',
                    data: { ipdno: ipdno, regno: regno, qty: qty },
                    dataType: "json",
                    success: function (data) {
                        window.open('@Url.Action("Rpt_A4stickerprint", "PatientReport")');
                    }
                });
            
    }
 </script>


<!-- ico font -->
@*</head>*@

<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">
        <form action="" onsubmit="return ValidationEvent()" id="Form1" method="post">
            <div class="content-wrapper">
                <section class="content-header">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-4">
                                <h1>Patient Registration</h1>
                            </div>
                            <div class="col-lg-4">
                                <label>
                                    <input type="radio" name="colorRadio" id="OPD" checked="checked" value="OPD">
                                    OPD Registration
                                </label>
                                <label style="float: right;">
                                    <input type="radio" name="colorRadio" id="IPD" value="IPD">
                                    IPD Registration
                                </label>
                            </div>
                            <div class="col-lg-4">
                                <ol class="breadcrumb float-sm-right">
                                    <li class="breadcrumb-item"><a href="@Url.Action("Dashboard","Home")">Home</a></li>
                                    <li class="breadcrumb-item"><a href="@Url.Action("Patient", "Application")">Patient Module</a></li>
                                    <li class="breadcrumb-item active">Patient Registration</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="content">
                    <div class="container-fluid">
                        <div id="myModal1" class="modal" aria-modal="true">
                            <div class="modal-dialog modal-lg" id="ModelID">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Patient Details</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <input type="text" id="Search" name="Search" class="form-control" placeholder="Search">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12" style="text-align: center;">
                                                <div class="col-lg-4">
                                                    @*<label>
                                                            <input type="radio" name="modalRadio" id="modalAll" checked value="ALL">
                                                            Both
                                                        </label>*@
                                                </div>
                                                <div class="col-lg-4">
                                                    <label>
                                                        <input type="radio" name="modalRadio" id="modalOPD" value="OPD">
                                                        OPD
                                                    </label>
                                                </div>
                                                <div class="col-lg-4"></div>
                                                <label>
                                                    <input type="radio" name="modalRadio" id="modalIPD" value="IPD">
                                                    IPD
                                                </label>
                                            </div>
                                        </div>
                                        <div class="card-body table-responsive">
                                            <table id="dgvPatientRecord" class="table table-bordered hover display dataTable table-hover" role="grid" style="width: 100%">
                                                <thead style="background-color: #bddff7;">
                                                    <tr>
                                                        <th>Sr. No.</th>
                                                        <th style="display:none">UHID</th>
                                                        <th>UHID No.</th>
                                                        <th>Patient Name</th>
                                                        <th>Patient Type</th>
                                                        @*<th>Action</th>*@
                                                    </tr>
                                                </thead>
                                                <tbody class="scrollbar"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="myModal2" class="modal" role="dialog">
                            <div class="modal-dialog modal-lg" id="ModelIDAppoint">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Patient Appointment Details</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <input type="text" id="SearchAppoint" name="SearchAppoint" class="form-control" placeholder="Search Patient Appointment">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card-body table-responsive">
                                            <table id="dgvPatientappointRecord" class="table table-bordered hover display dataTable table-hover" role="grid" style="width: 100%">
                                                <thead style="background-color: #bddff7;">
                                                    <tr>

                                                        <th>Status</th>
                                                        <th>AppointmentID</th>
                                                        <th>Patient Name</th>

                                                        @*<th>Action</th>*@
                                                    </tr>
                                                </thead>
                                                <tbody class="scrollbar"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="card card-primary panel-primary">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panelheading">
                                        <div class="col-lg-2  col-md-3 col-sm-12 col-xs-12 padding0">
                                            <h2 class="panelheading OPD box" id="opd">OPD Registration Details</h2>
                                            <h2 class="panelheading IPD box" id="ipd">IPD Registration Details</h2>
                                            @*<h2 class="panelheading IPD box" id="PrintRegNo">IPD Registration Details</h2>*@
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                                            <div id="OPDNOID" style="display:none">
                                                @*<span>OPD No:-</span>
                                                    <span style="padding: 0px; font-size: 14px; height: 23px; margin-top: 2px;font-weight:600">@Model.PrintOPDNo</span>*@
                                                @{
                                                    if (Convert.ToInt32(Model.PrintOPDNo) > 0)
                                                    {
                                                        <span>OPD No:-</span>
                                                        <span id="PrintOPDNo" style="font-weight:600">@Model.PrintOPDNo</span>
                                                    }
                                                }
                                            </div>
                                             <div id="PntID" >
                                               
                                                @{
                                                    if (Convert.ToInt32(Model.printRegNo) > 0)
                                                    {
                                                        <span>UHID No:-</span>
                                                        <span id="PrtRegNo" style="font-weight:600">@Model.printRegNo</span>
                                                    }
                                                }
                                                
                                            </div>
                                            <div id="IPDNOID" style="display:none">
                                                @*<span>IPD No:-</span>
                                                    <span style="padding: 0px; font-size: 14px; height: 23px; margin-top: 2px;font-weight:600">@Model.PrintIPDNO</span>*@
                                                @{
                                                    if (Convert.ToInt32(Model.PrintIPDNO) > 0)
                                                    {
                                                        <span>IPD No:-</span>
                                                        <span id="PrintIPDNo" style="font-weight:600">@Model.PrintIPDNO</span>
                                                        <input type="hidden" id="IPDNo" value="@Model.PrintIPDNO" name="IPDNo" />
                                                    }
                                                }
                                            </div>
                                        </div>
                                        <input type="hidden" value="" name="RevisitOPD_OPD_No" id="RevisitOPD_OPD_No" class="form-control">
                                        <div class="col-lg-2 col-md-3 col-sm-12 col-xs-12">
                                            <div style="display: inline-flex">
                                                <span>PatientType:-</span>
                                                <input type="hidden" value="New Registration" name="Regnew" id="Regnew" class="form-control">
                                                <label id="Revisit" for="Revisit" class="lbl" style="font-size: 15px;">New Registration</label>

                                                <label class="container1" style="margin-left: 10px;margin-top: 2px;font-size: 15px;">
                                                    <input type="checkbox" id="TPACheck" name="TPACheck" class="" value="" />
                                                    <span class="checkmark"></span>
                                                </label>
                                                <label id="TPAChk" for="TPAChk" class="" style="font-size: 15px;"></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                                            <div style="display: inline-flex" id="cancelID">
                                                <span>Patient Cancel</span>
                                                <label class="container1" style="margin-left: 10px;">
                                                    <input type="checkbox" id="PatientCancelID" name="PatientCancelID" class="" />
                                                    <span class="checkmark"></span>
                                                </label>
                                                <input type="text" id="PatientCancelText" name="PatientCancelText" class="form-control input-sm hidden" />
                                            </div>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                                            <button type="button" class="btndivcss" data-toggle="modal" data-target="#myModal1" id="BtnShowDetail" style="float: right;">
                                                <span class="fa fa-user buttoniconcss"></span> Patient Show
                                            </button>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                                            <button type="button" class="btndivcss" data-toggle="modal" data-target="#myModal2" id="BtnShowPatientAppointDetail" style="float: right;display:none">
                                                <span class="fa fa-user buttoniconcss">PatientAppointment</span>
                                            </button>
                                        </div>

                                    </div>
                                    <div class="card-body pane-body">
                                        <!--Patient Image-->
                                        <div class="col-lg-2 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group" style="border-radius: 4px;text-align:-webkit-center;margin-bottom: 0;">
                                                <img src="https://www.freeiconspng.com/uploads/patient-icon-8.png" height="150px" width="145px" id="img1" class="img-fluid">
                                            </div>
                                            <div class="custom-file">
                                                <input type="file" id="file" name="file" onchange="loadfile(event, 'OPDImage3')" aria-label="File browser example" class="custom-file-input fa fa-upload" style="font-size:12px;width:80%;padding:0px">
                                                <input type="hidden" name="OPDImage3" id="OPDImage3" />
                                                <label class="custom-file-label" for="customFile"></label>
                                                <input type="button" name="btnClear" id="btnClear" class="clear" value="Remove" />
                                            </div>
                                        </div>
                                        <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--UHID Number-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>UHID No.</span>
                                                        </div>
                                                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <input type="hidden" id="FinancialYearID" name="FinancialYearID">
                                                            <input type="hidden" id="PatientIPDNO" name="PatientIPDNO">
                                                            <input type="hidden" id="PatientOPDNO" name="PatientOPDNO">
                                                            <input type="hidden" id="SecurityDeposityID" name="SecurityDeposityID">
                                                            <input type="hidden" id="PatientAppointmentID" name="PatientAppointmentID">
                                                            <select class="form-control" id="FinancialYear" name="FinancialYear"></select>
                                                        </div>
                                                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="hidden" id="RegNo" name="RegNo" class="form-control" />
                                                            <input type="text" id="PrintRegNo" name="PrintRegNo"  class="form-control" />
                                                           
                                                           
                                                            @*  <input type="text" id="PrintRegNo" name="PrintRegNo" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                    <!--UHID Date and Time-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>UHID D/T</span>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <input type="date" id="RegistrationDate" name="RegistrationDate" value="@DateTime.Now.ToString("yyyy-MM-dd")" max="9999-12-31" class="form-control" />
                                                        </div>
                                                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="time" id="RegistrationTime" name="RegistrationTime" value="now" class="form-control" />

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--Patient Name-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Pt. Name</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <select class="form-control" id="PFPatientNameID" name="PFPatientNameID"></select>
                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <input type="hidden" id="PFPatientNameID1" name="PFPatientNameID1" class="form-control" placeholder="First" />
                                                            <input type="text" id="FirstName" required name="FirstName" class="form-control" placeholder="First" />
                                                          
                                                                <div class="patientTableDiv table-responsive" style="position: absolute;z-index: 100;max-height: 250px;overflow: scroll;background-color: #ffffff;border: 0;box-shadow: 10px 10px 10px -6px #797979;">
                                                                    <button type="button" id="patientdataclose" name="patientdataclose" value="X" class="">X</button>
                                                                      <table id="patientNameTable" class="table table-bordered display table-hover table-head-fixed" style="width: 100%; display:none;">

                                                                        <thead>
                                                                            <tr>
                                                                                <th style="background-color: #bddff7;">UHID No.</th>
                                                                                <th style="display:none">Print Reg No.</th>
                                                                                <th style="background-color: #bddff7;">Pt.Name</th>
                                                                                <th style="background-color: #bddff7;">Address</th>
                                                                                <th style="background-color: #bddff7;">Mobile No.</th>


                                                                            </tr>
                                                                        </thead>
                                                                        <tbody></tbody>
                                                                    </table>
                                                                  </div>
                                                              
                                                                
                                                            </div>
                                                            @*<div class="patientTableDiv table-responsive" style="position: absolute;z-index: 100;max-height: 250px;overflow: scroll;background-color: #ffffff;border: 0;box-shadow: 10px 10px 10px -6px #797979;">
                                                                <table id="patientNameTable" class="table table-bordered display table-hover table-head-fixed" style="width: 100%; display:none;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th style="background-color: #bddff7;">UHID No.</th>
                                                                            <th style="display:none">Print Reg No.</th>
                                                                            <th style="background-color: #bddff7;">Pt.Name</th>
                                                                            <th style="background-color: #bddff7;">Address</th>
                                                                            <th style="background-color: #bddff7;">Mobile No.</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>*@

                                                       
                                                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 cpb-10">
                                                            <input type="text" id="MiddleName" name="MiddleName" class="form-control" placeholder="Middle" />
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding-left: 0;padding-right: 0;">
                                                            <input type="text" id="LastName" name="LastName" class="form-control" placeholder="Last" />
                                                        </div>
                                                    </div>
                                                    <!--Guardian Name-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Gdn. Name</span>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <select class="form-control" id="PFGuardianNameID" name="PFGuardianNameID">
                                                                <option value="B/O">B/O</option>
                                                                <option value="F/O">F/O</option>
                                                                <option value="W/O">W/O</option>
                                                                <option value="M/O">M/O</option>
                                                                <option value="S/O">S/O</option>
                                                                <option value="D/O">D/O</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="text" id="GuardianName" name="GuardianName" class="form-control" placeholder="Guardian Name" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--Gender / Age-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Gend./Age</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <select name="Gender" required id="Gender" class="form-control">
                                                                <option value="Male">Male</option>
                                                                <option value="Female">Female</option>
                                                                <option value="Other">Other</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding-left: 0;padding-right: 0;">
                                                            <div class="input-group">
                                                                <div class="input-group-addon padding0">
                                                                    <span>Y</span>
                                                                </div>
                                                                <input type="number" required id="Year" name="Year" class="form-control" placeholder="Year" />
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 cpb-10">
                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <span>M</span>
                                                                </div>
                                                                <input type="number" id="Month" name="Month" class="form-control" placeholder="Month" />
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <span>D</span>
                                                                </div>
                                                                <input type="number" id="Day" name="Day" class="form-control" placeholder="Day" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!--Date Of Birth-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>DOB.</span>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 cpb-10 cpb-10" style="padding-right: 0;">
                                                            <input type="date" required id="DateOfBirth" name="DateOfBirth" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" max="9999-12-31">
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <input type="text" id="BP" name="BP" placeholder="BP" class="form-control" title="Blood Pressure" />
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 cpb-10" style="padding-right: 0;">
                                                            <input type="text" id="Weight" placeholder="Weight" name="Weight" class="form-control" title="Weight" />
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="text" id="Height" name="Height" placeholder="Height" class="form-control" title="Height" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--Consultant Doctor-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Cons. Dr.</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <label class="container2" style="margin-top: 2px;font-size:13px">
                                                                Temp.
                                                                <input type="checkbox" id="TemporaryDoctorID" name="TemporaryDoctorID" />
                                                                <span class="checkmark2"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="hidden" id="ConsultantDoctorID" name="ConsultantDoctorID" class="form-control" />
                                                            <input type="text" required id="ConsultantDoctorName" name="ConsultantDoctorName" class="form-control" placeholder="Consultant Doctor" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" id="LabelTemporaryID" style="display: none; padding-top: 15px; padding-right: 0;">
                                                            <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"></div>
                                                            <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12 padding0">
                                                                <input type="text" id="TemporaryDoctorText" name="TemporaryDoctorText" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!--Department-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span id="depar" name="depar">Department</span>
                                                        </div>
                                                        <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="hidden" id="DepartMentID" name="DepartMentID" class="form-control" />
                                                            <input type="text" id="DepartMentName" name="DepartMentName" readonly class="form-control" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--Consultant Doctor 1-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12" style="display:none" id="JointDr">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Joint Care Dr.</span>
                                                        </div>
                                                        <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            @*<input type="hidden" id="ConsDr1ID" name="ConsDr1ID" class="form-control input-sm" />
                                                                <input type="text" id="ConsDr1" name="ConsDr1" class="form-control input-sm" />*@
                                                            <select class='form-control' id="ConsDr1" name="ConsDr1">
                                                                <option value="-1">Select</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <!--Reason-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Reason</span>
                                                        </div>
                                                        <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="text" id="Reason" name="Reason" class="form-control" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <!--Referred Doctor-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Referred Dr.</span>
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <label class="container2" style="margin-top: 2px;font-size:13px">
                                                                Temp.
                                                                <input type="checkbox" id="RefferedTemporaryDoctorID" name="RefferedTemporaryDoctorID" />
                                                                @*name="TPACheck"*@
                                                                <span class="checkmark2"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="hidden" id="ReferredByDoctorID" name="ReferredByDoctorID" class="form-control" />
                                                            <input type="text" id="ReferredByDoctorName" name="ReferredByDoctorName" class="form-control" placeholder="Referred Doctor" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" id="refTemporaryID" style="display: none;padding-top: 15px;padding-right: 0;">
                                                            <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"></div>
                                                            <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12 padding0">
                                                                <input type="text" id="RefferedTemporaryDoctorText" name="RefferedTemporaryDoctorText" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!--Source-->
                                                    <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 padding0">
                                                            <span>Source</span>
                                                        </div>
                                                        <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12" style="padding-right: 0;">
                                                            <input type="text" id="Source" name="Source" class="form-control" />
                                                        </div>
                                                        @*<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                <button type="button" class="btndivcss" data-toggle="modal" data-target="#patinetPictureModal" style="float: right;">
                                                                    <span class="fa fa-picture-o buttoniconcss"></span> Show Patient Image
                                                                </button>
                                                                <div class="modal fade" id="patinetPictureModal" role="dialog" aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-body">
                                                                                <div class="form-group" style="border-radius: 4px;text-align: -webkit-center;">
                                                                                    <img src="https://www.freeiconspng.com/uploads/patient-icon-8.png" id="img1" class="img-fluid" style="max-height: 300px;">
                                                                                </div>
                                                                                <div class="custom-file">
                                                                                    <input type="file" id="file" name="file" onchange="loadfile(event, 'OPDImage3')" aria-label="File browser example" class="custom-file-input" style="font-size:12px;width:80%;padding:0px">
                                                                                    <input type="hidden" name="OPDImage3" id="OPDImage3" />
                                                                                    <label class="custom-file-label" for="customFile">Upload Image</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                    </div>
                                                </div>
                                            </div>
                                            @*<div style="display:none" id="IPDBox" class="col-lg-12 row  padding0 rowmarginbottom"></div>*@
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="card card-primary card-tabs">
                                    <div class="card-header p-0 pt-1">
                                        <ul class="nav nav-tabs" id="custom-tabs-two-tab" role="tablist">
                                            <li class="pt-2 px-3"></li>
                                            <li class="nav-item">
                                                <a class="nav-link active" id="addressDetail-tab" data-toggle="pill" href="#addressDetail" role="tab" aria-controls="addressDetail" aria-selected="true">
                                                    Address
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="insurance-tab" data-toggle="pill" href="#insurance" role="tab" aria-controls="insurance" aria-selected="false">
                                                    Insurance
                                                </a>
                                            </li>
                                            <li class="nav-item IPDBox" style="display:none">
                                                <a class="nav-link" id="ward-tab" data-toggle="pill" href="#ward" role="tab" aria-controls="ward" aria-selected="false">
                                                    Ward
                                                </a>
                                            </li>
                                            <li class="nav-item IPDBox" style="display:none">
                                                <a class="nav-link" id="package-tab" data-toggle="pill" href="#package" role="tab" aria-controls="package" aria-selected="false">
                                                    Medical Information
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content" id="custom-tabs-two-tabContent">
                                            <!-- Address -->
                                            <div class="tab-pane fade show active" id="addressDetail" role="tabpanel" aria-labelledby="addressDetail-tab">
                                                <!-- Address and City-->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Address-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Address</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <textarea class="form-control" required id="Address" name="Address" rows="2"></textarea>
                                                            </div>
                                                        </div>
                                                        <!--City-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>City</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" value="" id="CityID" name="CityID">
                                                                <input type="text" id="CityName" name="CityName" class="form-control" placeholder="Search City">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- State and Pin Code-->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--State-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>State</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="StateID" name="StateID" class="form-control">
                                                                <input type="text" id="State" name="State" class="form-control" readonly>
                                                            </div>
                                                        </div>
                                                        <!--Pin code-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Pin Code</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="number" id="Pincode" name="Pincode" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Country and email I'd-->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Country-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Country</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="CountryID" name="CountryID" class="form-control">
                                                                <input type="text" id="Country" name="Country" class="form-control" readonly>
                                                            </div>
                                                        </div>
                                                        <!--Email I'd-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Email I'd</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="email" id="EmailID" name="EmailID" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Phone and Mobile Number-->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Phone No.-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Phone No.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="number" id="PhoneNumber" name="PhoneNumber" class="form-control">
                                                            </div>
                                                        </div>
                                                        <!--Mobile No.-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Mobile No.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="text" maxlength="10" name="MobileNo" id="MobileNo" class="form-control"
                                                                       required style="border-left-color: red;border-left-width: thick;"
                                                                       oninvalid="this.setCustomValidity('Please Enter Mobile NUmber')"
                                                                       oninput="this.setCustomValidity(''); this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Aadhaar and Pan Card Number-->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Aadhaar Number-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Aadhaar No.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="number" id="AadhaarNo" name="AadhaarNo" class="form-control">
                                                            </div>
                                                        </div>
                                                        <!--Pan Card Number-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Pan Card No.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="text" id="PanCardNo" name="PanCardNo" class="form-control">
                                                            </div>
                                                            <div id="tblcount"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Insurance -->
                                            <div class="tab-pane fade" id="insurance" role="tabpanel" aria-labelledby="insurance-tab">
                                                <!--Organization-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>Organization</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="hidden" id="OrganizationID" name="OrganizationID" class="form-control" />
                                                        <input type="text" id="OrganizationName" name="OrganizationName" class="form-control" placeholder="Search Organization" />
                                                    </div>
                                                </div>
                                                <!--TPA Name-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>TPA Name</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="hidden" id="TPANameID" name="TPANameID" class="form-control" />
                                                        <input type="text" id="TPAName" name="TPAName" class="form-control" placeholder="Search TPA Name" />
                                                    </div>
                                                </div>
                                                <!--CCN / Claim Number-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>CCN/Claim No.</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="number" id="ClaimNo" name="ClaimNo" class="form-control" />
                                                    </div>
                                                </div>
                                                <!--Insurance Company-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>Insurance Comp.</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="hidden" id="InsuranceID" name="InsuranceID" class="form-control" />
                                                        <input type="text" id="InsuranceName" name="InsuranceName" class="form-control" placeholder="Search Insurance Company" />
                                                    </div>
                                                </div>
                                                <!--Policy Number-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>Policy No.</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="number" id="PolicyNo" name="PolicyNo" class="form-control" />
                                                    </div>
                                                </div>
                                                <!--Security Deposit-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12 IPDBox" style="display:none">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>Security Deposit</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="number" id="SecurityDeposit" name="SecurityDeposit" class="form-control" />
                                                    </div>
                                                </div>
                                                <!--Mediclaim Card ID-->
                                                <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12 IPDBox" style="display:none">
                                                    <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                        <label>Mediclaim Card ID</label>
                                                    </div>
                                                    <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                        <input type="text" id="MediclaimcardID" name="MediclaimcardID" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Ward -->
                                            <div class="tab-pane fade" id="ward" role="tabpanel" aria-labelledby="ward-tab">
                                                <!-- Ward Detail -->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Ward Name-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Ward Name</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="WardID" name="WardID" class="form-control" />
                                                                <select class='form-control' id="Wardname" name="Wardname">
                                                                    <option value="-1">Select</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <!--Room-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Room</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="RoomID" name="RoomID" class="form-control" />
                                                                <select class='form-control' id="RoomNo" name="RoomNo"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Room and Bed -->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Bed-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Bed</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="BedID" name="BedID" class="form-control" />
                                                                <select class='form-control' id="BedNo" name="BedNo"></select>
                                                            </div>
                                                        </div>
                                                        <!--Apply Ward-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Apply Ward</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="ApplicableClassID" name="ApplicableClassID" class="form-control" />
                                                                <input type="text" id="ApplicableClass" name="ApplicableClass" class="form-control" placeholder="Search Apply Ward" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Deposite and Payment Type -->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Deposite Amount-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Deposit Amt.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="number" id="DepositeAmt" name="DepositeAmt" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <!--Payment Type-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Payment Type</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <select class="form-control" name="payment_type" id="payment_type">
                                                                    <option value="Cash">CASH</option>
                                                                    <option value="Cheque">Cheque</option>
                                                                    <option value="Credit Card">Credit Card</option>
                                                                    <option value="Debit Card">Dedit Card</option>
                                                                    <option value="E-money">E-money</option>
                                                                    <option value="EFT">EFT</option>
                                                                    <option value="CASHLESS">CASHLESS</option>
                                                                </select>
                                                                <input type="hidden" id="HiddenPayment" name="HiddenPayment" />
                                                            </div>

                                                            <div class="modal" id="DoctorSaveDivs">
                                                                <div class="modal-dialog">
                                                                    <div class="modal-content">
                                                                        <!-- Modal body -->
                                                                        <div class="modal-body">
                                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                                <div class="control-label col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                                                    <label id="PaymentNo1" class="required">Cheque No</label>
                                                                                </div>
                                                                                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                                                                                    <input type="number" class="form-control" id="Number" name="Number">
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                                <div class="control-label col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                                                    <label id="paymentName1" class="required">Bank Name</label>
                                                                                </div>
                                                                                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                                                                                    <input type="text" class="form-control" id="Name" name="Name">
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                                <div class="control-label col-lg-4 col-md-6 col-sm-12 col-xs-12">
                                                                                    <label id="paymentDate1" class="required">Cheque Date</label>
                                                                                </div>
                                                                                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                                                                                    <input type="date" value="@DateTime.Now.ToString("yyyy-MM-dd")" max="9999-12-31" class="form-control" id="paymentDate" name="paymentDate">
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                                <div class="control-label col-lg-4  col-md-6 col-sm-12 col-xs-12">
                                                                                    <label id="paymentRemark1" class="required">Remark</label>
                                                                                </div>
                                                                                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                                                                                    <input type="text" class="form-control" id="Remarks" name="Remarks">
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                                <button type="button" id="paysave" class="btn btn-danger pull-right" data-dismiss="modal" style="font-size: 15px;margin-right: 15px;">
                                                                                    Save
                                                                                </button>
                                                                                <button type="button" id="cl" class="btn btn-danger pull-right" data-dismiss="modal" style="font-size: 15px;margin-right: 15px;">
                                                                                    Close
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Package -->
                                            <div class="tab-pane fade" id="package" role="tabpanel" aria-labelledby="package-tab">
                                                <!-- Elective Surgery and Medical Management -->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Elective Surgery-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Elective Surg.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <select class='form-control' id="Elective_Surgery" name="Elective_Surgery">
                                                                    <option value="Select">Select</option>
                                                                    <option value="Yes">Yes</option>
                                                                    <option value="No">No</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <!--Medical Management-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Medical Mgmt.</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <select class='form-control' name="Medical_Management" id="Medical_Management">
                                                                    <option value="Select">Select</option>
                                                                    <option value="Yes">Yes</option>
                                                                    <option value="No">No</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Patient Category and Package Name -->
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <!--Patient Category-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Category</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="hidden" id="PatientCategoryid" name="PatientCategoryid">
                                                                <select id="PatientCategory" name="PatientCategory" class="form-control"></select>

                                                                @*<select class='form-control' id="PatientCategory" name="PatientCategory">
                                                                        <option value="General">General</option>
                                                                        <option value="Emergency">Emergency</option>
                                                                        <option value="VIP">VIP</option>
                                                                        <option value="Poor">Poor</option>
                                                                    </select>*@
                                                            </div>
                                                        </div>
                                                        <!--Package Name-->
                                                        <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Package</label>
                                                            </div>
                                                            <div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                                                @* <input type="text" id="NameOfPackage" data-role="" name="NameOfPackage" class=" form-control input-sm" />*@
                                                                <select class='form-control' id="NameOfPackage" name="NameOfPackage">
                                                                    <option value="-1">Select</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12" style="text-align: center;">
                                <div class="btn-group dropdown-split-warning">
                                    <button type="submit" class="btn btn-app" id="save">
                                        <i class="fa fa-save"></i>Save
                                    </button>
                                </div>
                                @*<div class="btn-group dropdown-split-warning">
                                        <a class="btn btn-app" id="Delete">
                                            <i class="fa fa-trash"></i>Delete
                                        </a>
                                    </div>*@
                                <div class="btn-group dropdown-split-warning">
                                    <a class="btn btn-app" onclick="location.reload();">
                                        <i class="fa fa-refresh"></i>Clear
                                    </a>
                                </div>
                                <div class="btn-group dropdown-split-warning">
                                    <a class="btn btn-app" onclick="window.location.href='@Url.Action("Patient", "Application")'">
                                        <i class="fa fa-sign-out"></i>Exit
                                    </a>
                                </div>
                                @*<div class="btn-group dropdown-split-warning">
                                        <a class="btn btn-app" id="dgvPatientRecordExcelExport"></a>
                                    </div>*@

                                @*<div style="display:none" id="IPDBillID" class="btn-group dropdown-split-warning">
                                    <a class="btn btn-app" onclick="window.location.href='@Url.Action("IPDBill", "IPDBill")'">
                                        <i class="fa fa-default"></i>IPD Bill
                                    </a>
                                </div>
                                <div id="OPDBillID" class="btn-group dropdown-split-warning">
                                    <a class="btn btn-app" onclick="window.location.href='@Url.Action("OPDBill", "OPDBill")'">
                                        <i class="fa fa-default"></i>OPD Bill
                                    </a>
                                </div>*@
                                <div style="display:none" id="A4_sticker" class="btn-group dropdown-split-warning">
                                    <a class="btn btn-app" id="stickerModalButton" data-toggle="modal" data-target="#stickerModal">
                                        <i class="fa fa-default"></i>A4 Size Sticker
                                    </a>

                                    <div id="stickerModal" class="modal fade" role="dialog">
                                        <div class="modal-dialog">
                                            <!-- Modal content-->
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title">Sticker Details</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <!--Sticker Quantity-->
                                                        <div class="form-group col-lg-8 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                                <label>Sticker Quantity</label>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                                                <input type="text" class="form-control" id="sticker" name="sticker" placeholder="Enter Qunatity" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-lg-4 col-md-12 col-sm-12 col-xs-12" style="float: right;">
                                                            @*<button class="btndivcss" id="btnSticker" name="btnSticker" style="font-size: 15px;"
                                                                onclick ="sticker(document.getElementById('PatientIPDNO').value)"><i PatientIPDNO="fa fa-print"></i></button>*@
                                                            <a class="btn btn-app" onclick="sticker()">
                                                                <i class="fa fa-print"></i>Print
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </form>
    </div>
</body>

@*<script>
        $(document).ready(function () {
            document.createAttribute
            // var column = document.getElementById("tblcount");
            var div = document.getElementById("tblcount");

            x = document.createElement("TABLE");
            x.setAttribute("id", "tblpatient");
            //GetPatientLabOPDIPDNo
            div.appendChild(x);
            var len = 0;
            $("#PanCardNo1").change(function () {
                debugger
                var col = "";
                $("#tblpatient tr").remove();
                for (var a = 0; a < $(this).val() ; a++) {
                    col += '<th>ColumnName</th>';
                }
                $("#tblpatient").append(' <thead><tr id= "col">' + col + '</thead>');
                 len = $("#tblpatient thead th").length;


            })

            $("#EmailID1").change(function () {
                debugger
                var col = 0;
                for (var row = 0; row < $(this).val() ; row++) {
                    // col += '<tr>';
                    col = "";
                    for (var c = 0; c < $("#tblpatient thead th").length ; c++) {

                        col += '<td><input type="text" value='+c+'  class="form-control" name='+c+'></td>';
                    }
                    $("#tblpatient").append('<tr id= "col">' + col + '</tr>');
                }

                var len = $("#tblpatient thead th").length;

                var htm = document.getElementById("tblcount").innerHTML;
               // alert(htm);
            })


        })
    </script>*@
@*<script src="~/Scripts/fstdropdown.js">


</script>*@

<script>
    $(document).ready(function () {
        debugger
        @*$.ajax(
            {
            url: '@Url.Action("WardName", "PatientOPD")',
            type: "POST",
            dataType: "json",
            data: { prefix: "%" },
            success: function (data) {

                for (var row = 0; row < data.length; row++) {
                //   $("#WardName").append('<option value=' + data[row].WardID + '>' + data[row].WardName + ' </option>')
                }
                for (var row = 0; row < data.length; row++) {
                   $(".fstlist").append('<div data-value=' + data[row].WardID + ' >' + data[row].WardName + '</div>');
                         $("#Elective_Surgery").append('<option value=' + data[row].WardID + '>' + data[row].WardName + ' </option>')
                }
                setDrop();
                updateDrop();
            }

        })
        //se*@


        //$("#WardName").change(function () {

        //    alert($(this).val());
        //})
        //  //  setFstDropdown();

        function setDrop() {
            if (!document.getElementById('WardName').classList.contains("fstdropdown-select"))
                document.getElementById('WardName').className = 'fstdropdown-select';
            setFstDropdown();
            fstdropdown.rebind();
        }
        function addOptions(add) {
            debugger
            var select = document.getElementById("Elective_Surgery");
            for (var i = 0; i < add; i++) {
                var opt = document.createElement("option");
                var o = Array.from(document.getElementById("Elective_Surgery").querySelectorAll("option")).slice(-1)[0];
                var last = o == undefined ? 1 : Number(o.value) + 1;
                opt.text = opt.value = last;
                select.add(opt);
            }
        }
        function removeOptions(remove) {
            debugger
            for (var i = 0; i < remove; i++) {
                var last = Array.from(document.getElementById("Elective_Surgery").querySelectorAll("option")).slice(-1)[0];
                if (last == undefined)
                    break;
                Array.from(document.getElementById("Elective_Surgery").querySelectorAll("option")).slice(-1)[0].remove();
            }
        }
        function updateDrop() {
            debugger
            document.getElementById("WardName").fstdropdown.rebind();
        }

    })
</script>
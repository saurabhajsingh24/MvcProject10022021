@model KeystoneProject.Models.Master.Template

@{
    ViewBag.Title = "Patient";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


@*<!DOCTYPE html>
    <html>
    <head>*@
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">




<script>
    $(document).ready(function () {
        $('#maintable').DataTable({
            type: 'post',
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });
</script>


<style>
    .bootstrap-select.btn-group .dropdown-menu.inner {
        max-height: 320px !important;
        overflow: auto;
        min-height: 129px !important;
    }

    div.dt-buttons {
        position: relative;
        float: left;
        display: none;
    }


    .dataTables_wrapper .dataTables_info {
        clear: both;
        float: left;
        padding-top: 0.755em;
        display: none;
    }


    table.dataTable thead th, table.dataTable thead td {
        padding: 10px 18px;
        border-bottom: 1px solid #ccc8c8 !important;
        background: #bddff7;
        font-weight: 500 !important;
    }

    table.dataTable.no-footer {
        border-bottom: 1px solid #ebe7e7 !important;
    }

    .dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
        color: #333;
        background: #d0e6f6;
        font-family: roboto;
    }

    .dataTables_wrapper .dataTables_paginate {
        float: inherit !important;
    }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            background: #41b0ff !important;
            padding: 0px;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button {
            box-sizing: border-box;
            display: inline-block;
            min-width: 1.5em;
            padding: 2px 8px 0px 8px !important;
            margin-left: 2px;
            text-align: center;
            text-decoration: none !important;
            cursor: pointer;
            *cursor: hand;
            color: #333 !important;
            border: 1px solid transparent;
            border-radius: 2px;
        }

    .dataTables_wrapper .dataTables_paginate {
        float: right;
        text-align: right;
        padding-top: 0.25em;
        padding-bottom: 3px;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        padding: 3px;
    }

        .dataTables_wrapper .dataTables_filter input {
            margin-left: 0.5em;
            border: 1px solid #a6abaf;
            border-radius: 2px;
        }



    .btn-primary {
        background-color: #35a4f1 !important;
        color: #fff;
        border: 1px solid #35a4f1;
    }

    .file-field input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        width: 100%;
        margin: 0;
        padding: 0;
        cursor: pointer;
        opacity: 0;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        background: white;
    }

    input[type=file] {
        display: block;
        background: #ffffff;
        padding: 0px 2px 0px 0px;
        color: #868f95 !important;
        font-family: roboto;
    }

    .btn-group {
        margin-bottom: 4px;
    }

    .btn {
        padding: 0px;
    }

    .padding0 {
        padding: 0px;
    }

    .btndivcss:hover {
        color: #fff;
        background-color: #03578e;
        border-color: #106dca;
    }

    .btndivcss {
        height: 30px;
        border: 0px solid white;
        padding: 0px 6px 0px 0px !important;
        font-family: roboto;
        border-color: #35a4f1;
        box-shadow: 0 1px 1px rgba(0,0,0,.075);
        color: #ffffff;
        background-color: #35a4f1;
        border-radius: 4px;
    }

    .buttoniconcss {
        background: #106dca;
        padding: 8px;
        border-radius: 4px 0px 0px 4px;
        margin-right: 5px;
    }

    .scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .scrollbar::-webkit-scrollbar-thumb {
        background: #35a4f1;
        border-radius: 23px;
    }

        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

    .pagination {
        margin: 0px 0;
    }

    .pagination {
        display: inline-block;
        border-radius: 4px;
    }

        .pagination a {
            color: #35a4f1;
            float: left;
            padding: 1px 8px;
            text-decoration: none;
            transition: background-color .3s;
            font-size: 14px;
            border-radius: 4px;
            line-height: 21px;
        }

            .pagination a.active {
                background-color: #35a4f1;
                color: white;
            }

            .pagination a:hover:not(.active) {
                background-color: #ddd;
            }

    .table-bordered > tbody > tr > td {
        border: 1px solid #e1eff9;
    }

    .btn-group {
        padding-right: 4px;
    }

    .tableheading {
        color: #4c6588;
        font-family: roboto;
        padding-left: 1px;
        font-size: 17px;
        padding-top: 5px;
    }

    .topheadline {
        background: white;
        padding: 3px;
        color: #1e2123;
        box-shadow: 1px 1px 11px 1px #cecece;
        font-family: roboto;
        padding-left: 12px;
        font-size: 19px;
        margin-top: 0px;
    }

    .panelheading {
        background: rgb(189, 223, 247);
        color: #22292d;
        font-family: roboto;
        font-size: 15px;
        padding: 5px;
        margin-top: 0px;
        margin-bottom: 0px;
    }

    .panel-primary {
        border: 1px solid #dadada;
        border-radius: 4px;
        box-shadow: 1px 1px 11px 1px #eae4e4;
        background: #ffffff;
    }

    .content-wrapper {
        background: #F6F7FB !important;
    }

    span {
        font-family: roboto;
        font-size: 14px;
    }

    .rowmargintop {
        margin-top: 5px;
    }

    .form-control {
        height: 26px;
        padding: 1px 1px 1px 6px;
    }

    .content-header {
        padding: 0px .5rem;
    }

    .rowmarginbottom {
        margin-bottom: 4px;
    }

    th {
        font-family: roboto;
        font-size: 15px;
        font-weight: 500;
        background: #e6e5e5;
        padding: 3px !important;
        text-align: center;
        background-image: linear-gradient(#bcdcf3, #ffffff, #c6e1f4);
    }



    .table {
        background: #ffffff;
        border-radius: 4px;
        border-collapse: inherit;
        margin-bottom: 3px;
    }

    .btn-warning {
        color: #ffffff;
        background-color: #35a4f1;
        border-color: #35a4f1;
        box-shadow: 0 1px 1px rgba(0,0,0,.075);
        font-family: roboto;
    }
</style>
<style>
    .btn-primary {
        background-color: #35a4f1 !important;
        color: #fff;
        border: 1px solid #35a4f1;
    }

    .file-field input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        width: 100%;
        margin: 0;
        padding: 0;
        cursor: pointer;
        opacity: 0;
    }

    .tab .nav-tabs > li {
        margin-right: 2px;
    }

        .tab .nav-tabs > li > a {
            border: none;
            padding: 6px 10px;
            color: #fff;
            background: #4e6270;
            border-radius: 0;
            font-family: roboto;
            font-size: 15px;
            border-radius: 5px 5px 0px 0px;
        }

            .tab .nav-tabs > li > a > i {
                font-size: 14px;
                margin-right: 10px;
            }

        .tab .nav-tabs > li.active > a,
        .tab .nav-tabs > li.active > a:focus,
        .tab .nav-tabs > li.active > a:hover {
            border: none;
            background: #e74c3c;
            color: #fff;
            transition: background 0.20s linear;
        }

    a {
        color: #195580;
        text-decoration: none;
    }

    .tab .nav-tabs li.active:after {
        content: " ";
        position: absolute;
        bottom: -25px;
        left: 37%;
        border: 15px solid transparent;
        border-top-color: #e74c3c;
        z-index: 999;
    }

    .tab .tab-content {
        background: #fdfdfd;
        line-height: 25px;
        padding: 30px 45px;
        font-family: roboto;
        line-height: 30px;
        border: 2px solid #bddff7;
    }

    @@media only screen and (max-width 480px) {
        .tab > .nav-tabs li {
            width: 100%;
        }

        .tab .nav-tabs > li > a {
            padding: 20px;
            font-family: roboto;
        }

        .tab .nav-tabs > li.active:after {
            border: none;
        }
    }
</style>
<style>
    .the-legend {
        border-style: none;
        border-width: 0;
        font-size: 14px;
        line-height: 20px;
        margin-bottom: 0;
        width: auto;
        padding: 0 10px;
        border: 1px solid #e0e0e0;
        font-family: roboto;
        background: #bddff7;
    }

    .the-fieldset {
        border: 1px solid #e0e0e0;
        padding: 4px;
        background: #ffffff;
        font-family: roboto;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        display: none;
    }

    table.dataTable tbody th, table.dataTable tbody td {
        padding: 4px 10px !important;
    }
</style>
<style>
    .bootstrap-select > .dropdown-toggle.bs-placeholder, .bootstrap-select > .dropdown-toggle.bs-placeholder:active, .bootstrap-select > .dropdown-toggle.bs-placeholder:focus, .bootstrap-select > .dropdown-toggle.bs-placeholder:hover {
        color: #999;
        height: 27px;
    }


    .ui-dialog .ui-dialog-content {
        position: relative;
        border: 0;
        padding: .5em 1em;
        background: content-box;
        overflow: auto !important;
        height: 300px !important;
    }
    /*.modal-content ui-dialog-content ui-widget-content {min-height:100px;max-height:100px
    }

    .ui-dialog .ui-corner-all .ui-widget .ui-widget-content .ui-front .ui-draggable .ui-resizable {
        position: absolute;
        height: 369.4px;
        width: 50%;
        top: 187.5px;
        left: 327.5px;
        display: block;
        z-index: 101;
    }*/
    .bootstrap-select.btn-group .dropdown-toggle .caret {
        position: absolute;
        top: 50%;
        right: 9px;
        margin-top: -4px;
        vertical-align: middle;
    }

    .bootstrap-select.btn-group .dropdown-menu {
        min-width: 100%;
        width: 100%;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }

    .bootstrap-select.btn-group .dropdown-menu {
        min-width: 100%;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        height: 150px;
    }

    .panel-primary {
        border: 1px solid #dadada;
        border-radius: 4px;
        box-shadow: 1px 1px 11px 1px #eae4e4;
        background: #ffffff;
        /*overflow-x: scroll;
        overflow-y: scroll;
        max-height: 350px;*/
    }

    .bootstrap-select.btn-group .dropdown-menu open {
        min-width: 100%;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        height: 150px;
        overflow: auto;
    }



    td, th {
        white-space: nowrap;
        padding: 0;
    }

    button, input, select, textarea {
        font-family: inherit;
        font-size: inherit;
        line-height: normal;
    }


    .jqte_editor, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editor div, .jqte_editor p {
            line-height: 18px;
        }

    .jqte_editorAllergies, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editorAllergies div, .jqte_editorAllergies p {
            line-height: 18px;
        }

    .jqte_editorClinicalFindings, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editorClinicalFindings div, .jqte_editorClinicalFindings p {
            line-height: 18px;
        }

    .jqte_editorProvitionalDiag, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editorProvitionalDiag div, .jqte_editorProvitionalDiag p {
            line-height: 18px;
        }

    .jqte_editorInvestigation, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editorInvestigation div, .jqte_editorInvestigation p {
            line-height: 18px;
        }

    .jqte_editorTreatmentAdvice, .jqte_source {
        padding: 10px;
        background: #FFF;
        min-height: 100px;
        max-height: 900px;
        overflow: auto;
        outline: none;
        word-wrap: break-word;
        -ms-word-wrap: break-word;
        resize: vertical;
        white-space: pre;
        line-height: 18px;
        overflow-y: scroll;
        height: 100px;
    }

        .jqte_editorTreatmentAdvice div, .jqte_editorTreatmentAdvice p {
            line-height: 18px;
        }

    .jqte_tool.jqte_tool_1 .jqte_tool_label {
        position: relative;
        display: grid;
        padding: 5px;
        width: 70px;
        height: 21px;
        overflow: hidden;
    }
</style>

<script>
    $(document).ready(function () {
        $('#example').DataTable({
            type: 'post',
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });
</script>








<script>
    $(document).ready(function () {
        //$("#ChiefComplaintGrid").hide();
        $("#ChiefAllergiesGrid").hide();
        $("#ClinicalFindingsGrid").hide();
        $("#ProvisionalDiagonosisGrid").hide();
        $("#InvestigationsGrid").hide();
        $("#TreatmentAdviceGrid").hide();
    });
</script>
 
 
 
<script>
    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbChiefComplaint").on('click', function () {
            if ($(this).is(':checked'))
            {
                
                $("#ChiefAllergiesGrid").hide();
                $("#ClinicalFindingsGrid").hide();
                $("#ProvisionalDiagonosisGrid").hide();
                $("#InvestigationsGrid").hide();
                $("#TreatmentAdviceGrid").hide();
                $("#ChiefComplaintGrid").show();
                $('#ChiefComplaintGrid tbody tr').remove();
                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillChiefComplaint", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#ChiefComplaintGrid").append('<tr><td style="display:none">' + d.ChiefComplaintID + '</td><td class="tooltiptext">' + d.ChiefComplaint + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })
                 
         
            }
        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbAllergies").on('click', function () {
            if ($(this).is(':checked'))
            {
                $("#ChiefComplaintGrid").hide();
                $("#ClinicalFindingsGrid").hide();
                $("#ProvisionalDiagonosisGrid").hide();
                $("#InvestigationsGrid").hide();
                $("#TreatmentAdviceGrid").hide();
                $("#ChiefAllergiesGrid").show();
                $('#ChiefAllergiesGrid tbody tr').remove();

                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillAllergies", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#ChiefAllergiesGrid").append('<tr><td style="display:none">' + d.AllergiesID + '</td><td class="tooltiptext">' + d.Allergies + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })
            }
         

        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbClinicalFinding").on('click', function () {
            if ($(this).is(':checked'))
            {
                $("#ChiefComplaintGrid").hide();
                $("#ChiefAllergiesGrid").hide();
                $("#ProvisionalDiagonosisGrid").hide();
                $("#InvestigationsGrid").hide();
                $("#TreatmentAdviceGrid").hide();
                $("#ClinicalFindingsGrid").show();
                $('#ClinicalFindingsGrid tbody tr').remove();


                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillChiefHistory", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#ClinicalFindingsGrid").append('<tr><td style="display:none">' + d.ClinicalFindingsID + '</td><td class="tooltiptext">' + d.ClinicalFindings + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })
            }
           
        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbProvitionalDiagnosis").on('click', function () {
            if ($(this).is(':checked'))
            {
                $("#ChiefComplaintGrid").hide();
                $("#ChiefAllergiesGrid").hide();
                $("#ClinicalFindingsGrid").hide();
                $("#InvestigationsGrid").hide();
                $("#TreatmentAdviceGrid").hide();
                $("#ProvisionalDiagonosisGrid").show();
                $('#ProvisionalDiagonosisGrid tbody tr').remove();

                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillProvisionalDiagonosis", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#ProvisionalDiagonosisGrid").append('<tr><td style="display:none">' + d.ProvisionalDiagonosisID + '</td><td class="tooltiptext">' + d.ProvisionalDiagonosis + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })
            }
     
        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbInvestigation").on('click', function () {
            if ($(this).is(':checked'))
            {
                $("#ChiefComplaintGrid").hide();
                $("#ChiefAllergiesGrid").hide();
                $("#ClinicalFindingsGrid").hide();
                $("#ProvisionalDiagonosisGrid").hide();
                $("#TreatmentAdviceGrid").hide();
                $("#InvestigationsGrid").show();
                $('#InvestigationsGrid tbody tr').remove();

                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillInvestigation", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#InvestigationsGrid").append('<tr><td style="display:none">' + d.InvestigationsID + '</td><td class="tooltiptext">' + d.Investigations + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })

            }
          
        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#ChbTreatmentAdvice").on('click', function () {
            if ($(this).is(':checked'))
            {
                $("#ChiefComplaintGrid").hide();
                $("#ChiefAllergiesGrid").hide();
                $("#ClinicalFindingsGrid").hide();
                $("#ProvisionalDiagonosisGrid").hide();
                $("#InvestigationsGrid").hide();
                $("#TreatmentAdviceGrid").show();
                $('#TreatmentAdviceGrid tbody tr').remove();

                $.ajax({
                    //url: "/Add_Patient_Registration/BindConsultant_dr",
                    url: '@Url.Action("FillTreatmentAdvices", "PatientPrescriptionNew")',
                    type: "GET",
                    dataType: "json",

                    success: function (data) {

                        $(data).each(function (index, d) {
                            //  MasterLaboratory
                            debugger

                            $("#TreatmentAdviceGrid").append('<tr><td style="display:none">' + d.TreatmentAdviceID + '</td><td class="tooltiptext">' + d.TreatmentAdvice + '</td></tr>')
                            $(".tooltiptext").hover(function () {
                                $(this).prop('title', $.trim($(this).text()));
                            })
                            debugger

                        })
                    }
                })
            }
             
        });

    });

    $(document).ready(function () {

        //   $('#ChiefComplaintGrid').show();
        $("#sec27").on('click', function () {

            $("#ChiefComplaintGrid").hide();
            $("#ChiefAllergiesGrid").hide();
            $("#ClinicalFindingsGrid").hide();
            $("#ProvisionalDiagonosisGrid").hide();
            $("#InvestigationsGrid").hide();
            $("#TreatmentAdviceGrid").hide();
        });

    });

</script>

<script>
    $(document).ready(function () {
        $('#ChiefComplaintGrid').delegate('td', 'click', function () {


            debugger
            var row_num = parseInt($(this).parent().index());
            var ChiefComplaintID = parseInt(document.getElementById("ChiefComplaintGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var ChiefComplaintName = (document.getElementById("ChiefComplaintGrid").tBodies[0].rows[row_num].cells[1].innerHTML);



            var currentVal = $("#ChiefComplaint").val();

            if (currentVal == "") {
                $("#ChiefComplaint").val(ChiefComplaintName);
                }
          
            else {
                $("#ChiefComplaint").val(currentVal +'\n' + ChiefComplaintName);
             
                }
 

        })

        $('#ChiefAllergiesGrid').delegate('td', 'click', function () {


            debugger
            var row_num = parseInt($(this).parent().index());
            var AllergiesID = parseInt(document.getElementById("ChiefAllergiesGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var AllergiesName = (document.getElementById("ChiefAllergiesGrid").tBodies[0].rows[row_num].cells[1].innerHTML);
              
            var currentVal = $("#Allergies").val();

            if (currentVal == "") {
                $("#Allergies").val(AllergiesName);
                }
            

            else {
             
                $("#Allergies").val(currentVal + '\n' + AllergiesName);
            }
        })


        $('#ClinicalFindingsGrid').delegate('td', 'click', function () {


            debugger
            var row_num = parseInt($(this).parent().index());
            var ClinicalFindingsID = parseInt(document.getElementById("ClinicalFindingsGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var ClinicalFindings = (document.getElementById("ClinicalFindingsGrid").tBodies[0].rows[row_num].cells[1].innerHTML);


            var currentVal = $("#ClinicalFinding").val();

            if (currentVal == "") {
                $("#ClinicalFinding").val(ClinicalFindings);
            }

            else {
               
                $("#ClinicalFinding").val(currentVal + '\n' + ClinicalFindings);
            }
        })


        $('#ProvisionalDiagonosisGrid').delegate('td', 'click', function () {


            debugger
            var row_num = parseInt($(this).parent().index());
            var ProvisionalDiagonosisID = parseInt(document.getElementById("ProvisionalDiagonosisGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var ProvisionalDiagonosis = (document.getElementById("ProvisionalDiagonosisGrid").tBodies[0].rows[row_num].cells[1].innerHTML);


            var currentVal = $("#ProvitionalDiagnosis").val();

            if (currentVal == "") {
                $("#ProvitionalDiagnosis").val(ProvisionalDiagonosis);
            }

            else {
      
                $("#ProvitionalDiagnosis").val(currentVal + '\n' + ProvisionalDiagonosis);

            }
        })

        $('#InvestigationsGrid').delegate('td', 'click', function () {


            debugger
            var row_num = parseInt($(this).parent().index());
            var InvestigationsID = parseInt(document.getElementById("InvestigationsGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var Investigations = (document.getElementById("InvestigationsGrid").tBodies[0].rows[row_num].cells[1].innerHTML);


            var currentVal = $("#Investigation").val();

            if (currentVal == "") {
                $("#Investigation").val(Investigations);
            }

            else {
              
                $("#Investigation").val(currentVal + '\n' + Investigations);

            }
        })

        $('#TreatmentAdviceGrid').delegate('td', 'click', function () {

            debugger
            var row_num = parseInt($(this).parent().index());
            var TreatmentAdviceID = parseInt(document.getElementById("TreatmentAdviceGrid").tBodies[0].rows[row_num].cells[0].innerHTML);
            var TreatmentAdvice = (document.getElementById("TreatmentAdviceGrid").tBodies[0].rows[row_num].cells[1].innerHTML);



            var currentVal = $("#TreatmentAdvice").val();

            if (currentVal == "") {
                $("#TreatmentAdvice").val(TreatmentAdvice);
            }

            else {
              
                $("#TreatmentAdvice").val(currentVal + '\n' + TreatmentAdvice);
            }
        })
    })
</script>



<script>

    $(document).ready(function () {
        $('#MainMedicines').autocomplete({
            source: function (request, responce) {
                debugger
                $.ajax({
                    url: '@Url.Action("GetMedicine", "PatientPrescriptionNew")',
                    type: "Post",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {
                        responce($.map(data, function (item) {
                            return { label: item.Medicines, value: item.Medicines, id: item.MedicineLibraryID }
                        }));
                    }
                })

            },
            minLength: 1,
            select: function (event, ui) {

                if (!ui.item) {

                    this.value = '';
                }
                debugger
                $("#MainMedicines").val(ui.item.id);
                // $("#datatable-responsive td").remove();
                $.ajax({
                    url: '@Url.Action("FillMedicinesOnMedicines", "PatientPrescriptionNew")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: $("#MainMedicines").val() },
                    success: function (data) {
                        debugger
                        if (data[0].Message.length > 5) {
                            alert(data[0].Message);
                        }

                        for (var i = 0; i < data.length; i++) {
                            debugger

                            $("#TableMedicinesAdd").append('<tr> <td style="display:none"><input type="hidden"  name="MedicineLibraryID" value="' + data[i].MedicineLibraryID + '"/>' + data[i].MedicineLibraryID + '</td> <td><input type="hidden"   name="Medicines" value="' + data[i].Medicines + '"/>' + data[i].Medicines + '</td><td><input type="hidden"  name="Strength" value="' + data[i].Strength + '"/>' + data[i].Strength + '</td><td><input type="hidden"  name="Frequency" value="' + data[i].Frequency + '"/>' + data[i].Frequency + '</td><td><input type="hidden"  name="Days" value="' + data[i].Days + '"/>' + data[i].Days + '</td><td><input type="hidden"  name="Instruction" value="' + data[i].Instruction + '"/>' + data[i].Instruction + '</td> <td><input type="button" value="Remove" id="delrow" class="btndivcss"/> </td>  </tr>');
                            //  alert(data[i].Medicines)
                            $("#MainMedicines").val("");

                        }
                        debugger


                    }

                });
            }
        });
    });


</script>

<script>




    $(document).ready(function () {
        $('#Packages').autocomplete({
            source: function (request, responce) {
                debugger
                $.ajax({
                    url: '@Url.Action("GetPackages", "PatientPrescriptionNew")',
                    type: "Post",
                    dataType: "json",
                    data: { prefix: request.term },
                    success: function (data) {
                        responce($.map(data, function (item) {
                            return { label: item.PackagesName, value: item.PackagesName, id: item.PackagesID }
                        }));
                    }
                })
            },
            minLength: 1,
            select: function (event, ui) {

                if (!ui.item) {

                    this.value = '';
                }
                debugger
                $("#PackagesID").val(ui.item.id);
                // $("#datatable-responsive td").remove();
                $.ajax({
                    url: '@Url.Action("FillMedicinesOnPackages", "PatientPrescriptionNew")',
                    type: "POST",
                    dataType: "json",
                    data: { prefix: $("#PackagesID").val() },
                    success: function (data) {
                        debugger
                        if (data[0].Message.length > 5) {
                            alert(data[0].Message);
                        }

                        for (var i = 0; i < data.length; i++) {
                            debugger

                            $("#TableMedicinesAdd").append('<tr> <td style="display:none"><input type="hidden"  name="MedicineLibraryID" value="' + data[i].MedicineLibraryID + '"/>' + data[i].MedicineLibraryID + '</td> <td><input type="Hidden"   name="Medicines" value="' + data[i].Medicines + '"/>' + data[i].Medicines + '  </td><td><input type="hidden"  name="Strength" value="' + data[i].Strength + '"/>' + data[i].Strength + '</td><td><input type="hidden"  name="Frequency" value="' + data[i].Frequency + '"/>' + data[i].Frequency + '</td><td><input type="Text"  name="Days" value="' + data[i].Days + '"/></td><td><input type="text"  name="Instruction" value="' + data[i].Instruction + '"/> </td> <td><input type="button" value="Remove" id="delrow" class="btndivcss"/> </td>  </tr>');
                            //   alert(data[i].Medicines)
                            $("#Packages").val("");
                        }
                        debugger


                    }

                });
            }
        });
    });

    $(document).ready(function () {
        $("#TableMedicinesAdd").on('click', '#delrow', function () {
            debugger;
            $(this).closest('tr').remove();
            $(this).closest('tr').text();
        });
    })
</script>

<script>
    $(document).ready(function () {
        $("#ShowGrid").click(function () {

            $("#datatable-responsive").show();
            $("#OldPrescriptionGrid").hide();
        });
    });



</script>
<script>
    $(document).ready(function () {
        $("#OldPrescriptionGrid").hide();
        $("#datatable-responsive").show();
        $.ajax({
            //url: "/Add_Patient_Registration/BindConsultant_dr",
            url: '@Url.Action("FillDataForModal", "PatientPrescriptionNew")',
            type: "GET",
            dataType: "json",
            data: { prefix: $("#myModal").val() },
            success: function (data) {

                $(data).each(function (index, d) {
                    //  MasterLaboratory
                    debugger

                    $("#datatable-responsive").append('<tr><td>' + d.PatientRegNO + '</td><td>' + d.PatientName + '</td><td>' + d.Gender + '</td><td>' + d.OPDIPDID + '</td><td>' + d.GuardianName + '</td><td>' + d.Age + '</td><td style="display:none">' + d.AgeType + '</td></tr>')
                    debugger

                })
            }
        })

    });
</script>



<script>
    $(document).ready(function () {
        $.ajax({

            url: '@Url.Action("GetPatientPrescriptionNewMedicine", "PatientPrescriptionNew")',

            type: "GET",
            dataType: "json",
            data: { PatientPrescriptionNewID: PatientPrescriptionNewID },
            success: function (data) {
                debugger
                for (var i = 0; i < data[0].InvestigationArray.length; i++) {
                    var Invest = data[0].InvestigationArray[i].Investigations;
                    if (Invest.length > 0) {
                        $("#Investigations").append('<option selected="selected" value=' + Invest + '>' + Invest + '</option>');
                    }
                }
            }
        });
    });


</script>

<script>
    $(document).ready(function () {
         
        $("#OldTemplateGrid").show();

            $.ajax({
                url: '@Url.Action("GetAllOldTemplate", "Template")',
                type: "GET",
                data: {},
                dataType: "json",
                success: function (data) {
                    debugger
                    $("#OldTemplate").empty().append('<option selected="selected" value="0">Select Template</option>');
                    $(data).each(function (index, d) {
                        $("#OldTemplate").append($("<option value=" + d.OldTemplateID + ">" + d.OldTemplate + "</option>"));
                    });
                }
            });

       
    });
</script>

<script>

    $(document).ready(function () {
        $("#OldTemplateGrid").change(function () {

            debugger
            var e = document.getElementById("OldTemplate");
            var TemplateNo = e.options[e.selectedIndex].value;
            alert(TemplateNo);

            $("#TemplateID").val(TemplateNo);

            $.ajax({
                url: '@Url.Action("GetTemplateOld", "Template")',
                type: "Post",
                dataType: "json",
                data: { OldTemplateID: TemplateNo },
                success: function (data) {


                    $("#TemplateName").val(data.SearchlistOld[0].TemplateName);
                    $("#ChiefComplaint").text(data.SearchlistOld[0].ChiefComplaint);
                    $("#Allergies").text(data.SearchlistOld[0].Allergies);
                    $("#ClinicalFinding").val(data.SearchlistOld[0].ClinicalFinding);
                    $("#ProvitionalDiagnosis").val(data.SearchlistOld[0].ProvitionalDiagnosis);
                    $("#Investigation").val(data.SearchlistOld[0].Investigation);
                    $("#TreatmentAdvice").val(data.SearchlistOld[0].TreatmentAdvice);
                   
                    $('#TableMedicinesAdd tbody tr').remove();
                    for (var i = 0; i < data.searchlistMed.length ; i++) {
                        $("#TableMedicinesAdd").append('<tr> <td style="display:none"><input type="hidden"  name="MedicineLibraryID" value="' + data.searchlistMed[i].MedicineLibraryID + '"/>' + data.searchlistMed[i].MedicineLibraryID + '</td> <td><input type="Hidden"   name="Medicines" value="' + data.searchlistMed[i].Medicines + '"/>' + data.searchlistMed[i].Medicines + '  </td><td><input type="hidden"  name="Strength" value="' + data.searchlistMed[i].Strength + '"/>' + data.searchlistMed[i].Strength + '</td><td><input type="hidden"  name="Frequency" value="' + data.searchlistMed[i].Frequency + '"/>' + data.searchlistMed[i].Frequency + '</td><td><input type="Text"  name="Days" value="' + data.searchlistMed[i].Days + '"/></td><td><input type="text"  name="Instruction" value="' + data.searchlistMed[i].Instruction + '"/> </td> <td><input type="button" value="Remove" id="delrow" class="btndivcss"/> </td>  </tr>');
                    }


                }
            });
        })
    });
</script>
<script>
    $(document).ready(function () {
        $("#Weight, #Height").keyup(function () {
            debugger
            //   var row = $(this).closest('tr');
            var weight = document.getElementById('Weight').value
            var height = document.getElementById('Height').value
            var bmi = weight / (height / 100 * height / 100);
            var bmi2 = bmi.toFixed(2);
            $('#BMI').val(isNaN(bmi2) ? '' : bmi2);
        });
    });
</script>

<!-- ico font -->
@*</head>*@

<body class="hold-transition skin-blue sidebar-mini">

    <div class="wrapper">

        @* <a href="#" data-toggle="modal" data-target="#myModal"><strong>Add Information</strong></a>*@


        <div class="content-wrapper">
            <h5 class="topheadline">
                Template 
            </h5>




            <form action="" method="post" >

                <section class="content-header">
                    <div class="container-fluid">

                      
                        <div class="row">
                            <div class="col-md-12 rowmargintop">  

                                            <div class="row">
                                                <div class="col-md-9 rowmargintop">

                                                    <!-- Tab panes -->
                                                    <!-- nav baars.............. -->
                                                    <div class="form-group" style="  margin-bottom: 10px;">

                                                   
                                                        <fieldset class="the-fieldset" id="the_fieldset">
                                                            <legend class="the-legend">Template</legend>

                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                    <span>Template</span>
                                                                </div>
                                                                <div class="col-lg-5">
                                                                    <input type="text" id="TemplateName" name="TemplateName" class="form-control input-sm" />
                                                                    <input type="hidden" id="TemplateID" name="TemplateID" />
                                                                </div>
                                                            </div>


                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                   <span> <input type="checkbox" id="ChbChiefComplaint" name="ChbChiefComplaint" /> Chief Complaint</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="ChiefComplaint" name="ChiefComplaint" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                    <span><input type="checkbox" id="ChbAllergies" name="ChbAllergies" />Allergies</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="Allergies" name="Allergies" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>



                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2"> 
                                                                    <span><input type="checkbox" id="ChbClinicalFinding" name="ChbClinicalFinding" />Clinical Finding</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="ClinicalFinding" name="ClinicalFinding" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                    <span><input type="checkbox" id="ChbProvitionalDiagnosis" name="ChbProvitionalDiagnosis" />Provitional Diagnosis</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="ProvitionalDiagnosis" name="ProvitionalDiagnosis" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                    <span><input type="checkbox" id="ChbInvestigation" name="ChbInvestigation" />Investigation</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="Investigation" name="Investigation" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 rowmargintop">
                                                                <div class="col-lg-2">
                                                                    <span><input type="checkbox" id="ChbTreatmentAdvice" name="ChbTreatmentAdvice" />Treatment Advice</span>
                                                                </div>
                                                                <div class="col-lg-10">
                                                                    <textarea id="TreatmentAdvice" name="TreatmentAdvice" class="form-control input-sm"></textarea>

                                                                </div>
                                                            </div>
                                                        </fieldset>

                                                        <fieldset class="the-fieldset">
                                                            <legend class="the-legend">Medicines</legend>

                                                            <div class="col-lg-12 rowmargintop row">
                                                                <div class="col-lg-2">
                                                                    <span>Medicines</span>
                                                                </div>
                                                                <div class="col-lg-4">

                                                                    <input type="text" id="MainMedicines" name="Medicines" class="form-control input-sm">

                                                                </div>

                                                            </div>

                                                            <div class="col-md-12 padding0 rowmargintop">
                                                                <div class="panel-primary table" style="box-shadow: none; overflow: auto; height: 200px;">
                                                                    <div class="box-header">

                                                                    </div>
                                                                    <!-- /.box-header -->
                                                                    <table id="TableMedicinesAdd" class="display" style="width:100%">
                                                                        <thead>
                                                                            <tr class="header" id="myHeader">
                                                                                <th>Sno.</th>
                                                                                <th>Medicine</th>
                                                                                <th>Strength</th>
                                                                                <th>Frequency</th>
                                                                                <th>Days</th>
                                                                                <th>Instructions</th>
                                                                            </tr>
                                                                        </thead>


                                                                    </table>






                                                                    <!-- /.box-body -->
                                                                </div>
                                                                <!-- /.box -->
                                                                <br />
                                                                <div id="contact" class="form-group">

                                                                </div>


                                                            </div>


                                                            <div class="col-md-12 padding0 rowmargintop">
                                                                <div class="panel-primary" style="box-shadow:none">
                                                                    <div class="box-header">

                                                                    </div>
                                                                    <!-- /.box-header -->
                                                                    <!-- /.box-body -->
                                                                </div>
                                                                <!-- /.box -->
                                                            </div>
                                                        </fieldset>

                                                    </div>

 
                                                </div>

                                                <div class="col-lg-3 rowmargintop" style="overflow-x: scroll;height: 400px;width: 200px;max-width: 316px;">
                                                    <div class=" panel-primary" style="box-shadow:none" id="OldTemplateGrid">
                                                        <div class="box-header with-border">
                                                            <h3 class="panelheading">OLD Template</h3>
                                                        </div>

                                                        <div class="form-horizontal">
                                                            <select class="form-control" name="OldTemplate" id="OldTemplate" style="padding: 0px 0px;">
                                                                <option value="Select Template">Select Template</option>
                                                            </select>

                                                        </div>

                                                    </div>

 
                                                    <br />

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">


                                                            @*<select class="form-control selectpicker" id="ChiefComplaint" name="ChiefComplaint[]" style="height: 25px; width: 100%;" data-live-search="true">
                                                                    <option value="select">--select--</option>
                                                                    @{

                                                                        for (int i = 0; i < Model.ShowChiefComplaint.Tables[0].Rows.Count; i++)
                                                                        {

                                                                            <option value="@Model.ShowChiefComplaint.Tables[0].Rows[i]["ChiefComplaintID"].ToString()">@Model.ShowChiefComplaint.Tables[0].Rows[i]["ChiefComplaint"].ToString()</option>

                                                                        }

                                                                    }


                                                                </select>*@


                                                            <table id="ChiefComplaintGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr>

                                                                        <th>
                                                                            Chief
                                                                            Complaint
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>



                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">

                                                            <table id="ChiefAllergiesGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr style="white-space: nowrap !important; width: 200px; overflow: hidden; table-layout: fixed;">

                                                                        <th>
                                                                            Allergies
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>

                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">

                                                            <table id="ClinicalFindingsGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr>

                                                                        <th>
                                                                            Clinical Findings
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>

                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">

                                                            <table id="ProvisionalDiagonosisGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr>

                                                                        <th>
                                                                            Provisional Diagonosis
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>

                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">

                                                            <table id="InvestigationsGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr>

                                                                        <th>
                                                                            Investigations
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>

                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-10 padding0 rowmargintop">

                                                            <table id="TreatmentAdviceGrid" class="display" style="width:100%">

                                                                <thead>
                                                                    <tr>

                                                                        <th>
                                                                            Treatment Advice
                                                                        </th>

                                                                    </tr>
                                                                </thead>
                                                            </table>

                                                        </div>

                                                    </div>


                                                </div>




                                            </div>


                                      
                            </div>
                        </div> 


                        <div class="col-lg-12" style="text-align: center; display: block;margin-top:10px">
                            <div class="btn-group dropdown-split-warning">

                                <button type="submit" id="Submit" class="btndivcss"><span class="fa fa-save buttoniconcss"></span>Save</button>


                            </div>
                            <div class="btn-group dropdown-split-warning">

                                <button type="button" class="btndivcss"><span class="fa fa-trash buttoniconcss"></span>Delete</button>


                            </div>
                            <div class="btn-group dropdown-split-warning">

                                <button type="button" class="btndivcss"><span class="fa fa-refresh buttoniconcss"></span>Clear</button>


                            </div>
                            <div class="btn-group dropdown-split-warning">

                                <button type="button" class="btndivcss"><span class="fa fa-sign-out buttoniconcss"></span>Exit</button>


                            </div>

                        </div>


                    </div>





                </section>
            </form>

        </div>
    </div>

</body>

@model KeystoneProject.Models.Patient.Deposit

@{
    ViewBag.Title = "Patient";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


@*<!DOCTYPE html>
    <html>
    <head>*@
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script>
    $(document).ready(function () {
        $('#maintable').DataTable({
            type: 'post',
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });
</script>


<style>
    div.dt-buttons {
        position: relative;
        float: left;
        display: none;
    }


    .dataTables_wrapper .dataTables_info {
        clear: both;
        float: left;
        padding-top: 0.755em;
        display: none;
    }


    table.dataTable thead th, table.dataTable thead td {
        padding: 10px 18px;
        border-bottom: 1px solid #ccc8c8 !important;
        background: #bddff7;
        font-weight: 500 !important;
    }

    table.dataTable.no-footer {
        border-bottom: 1px solid #ebe7e7 !important;
    }

    .dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
        color: #333;
        background: #d0e6f6;
        font-family: roboto;
    }

    .dataTables_wrapper .dataTables_paginate {
        float: inherit !important;
    }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            background: #41b0ff !important;
            padding: 0px;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button {
            box-sizing: border-box;
            display: inline-block;
            min-width: 1.5em;
            padding: 2px 8px 0px 8px !important;
            margin-left: 2px;
            text-align: center;
            text-decoration: none !important;
            cursor: pointer;
            *cursor: hand;
            color: #333 !important;
            border: 1px solid transparent;
            border-radius: 2px;
        }

    .dataTables_wrapper .dataTables_paginate {
        float: right;
        text-align: right;
        padding-top: 0.25em;
        padding-bottom: 3px;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        padding: 3px;
    }

        .dataTables_wrapper .dataTables_filter input {
            margin-left: 0.5em;
            border: 1px solid #a6abaf;
            border-radius: 2px;
        }



    .btn-primary {
        background-color: #35a4f1 !important;
        color: #fff;
        border: 1px solid #35a4f1;
    }

    .file-field input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        width: 100%;
        margin: 0;
        padding: 0;
        cursor: pointer;
        opacity: 0;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        background: white;
    }

    input[type=file] {
        display: block;
        background: #ffffff;
        padding: 0px 2px 0px 0px;
        color: #868f95 !important;
        font-family: roboto;
    }

    .btn-group {
        margin-bottom: 4px;
    }

    .btn {
        padding: 0px;
    }

    .padding0 {
        padding: 0px;
    }

    .btndivcss:hover {
        color: #fff;
        background-color: #03578e;
        border-color: #106dca;
    }

    .btndivcss {
        height: 30px;
        border: 0px solid white;
        padding: 0px 6px 0px 0px !important;
        font-family: roboto;
        border-color: #35a4f1;
        box-shadow: 0 1px 1px rgba(0,0,0,.075);
        color: #ffffff;
        background-color: #35a4f1;
        border-radius: 4px;
    }

    .buttoniconcss {
        background: #106dca;
        padding: 8px;
        border-radius: 4px 0px 0px 4px;
        margin-right: 5px;
    }

    .scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .scrollbar::-webkit-scrollbar-thumb {
        background: #35a4f1;
        border-radius: 23px;
    }

        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

    .pagination {
        margin: 0px 0;
    }

    .pagination {
        display: inline-block;
        border-radius: 4px;
    }

        .pagination a {
            color: #35a4f1;
            float: left;
            padding: 1px 8px;
            text-decoration: none;
            transition: background-color .3s;
            font-size: 14px;
            border-radius: 4px;
            line-height: 21px;
        }

            .pagination a.active {
                background-color: #35a4f1;
                color: white;
            }

            .pagination a:hover:not(.active) {
                background-color: #ddd;
            }

    .table-bordered > tbody > tr > td {
        border: 1px solid #e1eff9;
    }

    .btn-group {
        padding-right: 4px;
    }

    .tableheading {
        color: #4c6588;
        font-family: roboto;
        padding-left: 1px;
        font-size: 17px;
        padding-top: 5px;
    }

    .topheadline {
        background: white;
        padding: 3px;
        color: #1e2123;
        box-shadow: 1px 1px 11px 1px #cecece;
        font-family: roboto;
        padding-left: 12px;
        font-size: 19px;
        margin-top: 0px;
    }

    .panelheading {
        background: rgb(189, 223, 247);
        color: #22292d;
        font-family: roboto;
        font-size: 15px;
        padding: 5px;
        margin-top: 0px;
        margin-bottom: 0px;
    }

    .panel-primary {
        border: 1px solid #dadada;
        border-radius: 4px;
        box-shadow: 1px 1px 11px 1px #eae4e4;
        background: #ffffff;
    }

    .content-wrapper {
        background: #F6F7FB !important;
    }

    span {
        font-family: roboto;
        font-size: 14px;
    }

    .rowmargintop {
        margin-top: 5px;
    }

    .form-control {
        height: 26px;
        padding: 1px 1px 1px 6px;
    }

    .content-header {
        padding: 0px .5rem;
    }

    .rowmarginbottom {
        margin-bottom: 4px;
    }

    th {
        font-family: roboto;
        font-size: 15px;
        font-weight: 500;
        background: #e6e5e5;
        padding: 3px !important;
        text-align: center;
        background-image: linear-gradient(#bcdcf3, #ffffff, #c6e1f4);
    }



    .table {
        background: #ffffff;
        border-radius: 4px;
        border-collapse: inherit;
        margin-bottom: 3px;
    }

    .btn-warning {
        color: #ffffff;
        background-color: #35a4f1;
        border-color: #35a4f1;
        box-shadow: 0 1px 1px rgba(0,0,0,.075);
        font-family: roboto;
    }
</style>
<style>
    .btn-primary {
        background-color: #35a4f1 !important;
        color: #fff;
        border: 1px solid #35a4f1;
    }

    .file-field input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        width: 100%;
        margin: 0;
        padding: 0;
        cursor: pointer;
        opacity: 0;
    }

    .tab .nav-tabs > li {
        margin-right: 2px;
    }

        .tab .nav-tabs > li > a {
            border: none;
            padding: 6px 10px;
            color: #fff;
            background: #4e6270;
            border-radius: 0;
            font-family: roboto;
            font-size: 15px;
            border-radius: 5px 5px 0px 0px;
        }

            .tab .nav-tabs > li > a > i {
                font-size: 14px;
                margin-right: 10px;
            }

        .tab .nav-tabs > li.active > a,
        .tab .nav-tabs > li.active > a:focus,
        .tab .nav-tabs > li.active > a:hover {
            border: none;
            background: #e74c3c;
            color: #fff;
            transition: background 0.20s linear;
        }

    a {
        color: #195580;
        text-decoration: none;
    }

    .tab .nav-tabs li.active:after {
        content: " ";
        position: absolute;
        bottom: -25px;
        left: 37%;
        border: 15px solid transparent;
        border-top-color: #e74c3c;
        z-index: 999;
    }

    .tab .tab-content {
        background: #fdfdfd;
        line-height: 25px;
        padding: 30px 45px;
        font-family: roboto;
        line-height: 30px;
        border: 2px solid #bddff7;
    }

    @@media only screen and (max-width 480px) {
        .tab > .nav-tabs li {
            width: 100%;
        }

        .tab .nav-tabs > li > a {
            padding: 20px;
            font-family: roboto;
        }

        .tab .nav-tabs > li.active:after {
            border: none;
        }
    }
</style>
<style>
    .the-legend {
        border-style: none;
        border-width: 0;
        font-size: 14px;
        line-height: 20px;
        margin-bottom: 0;
        width: auto;
        padding: 0 10px;
        border: 1px solid #e0e0e0;
        font-family: roboto;
        background: #bddff7;
    }

    .the-fieldset {
        border: 1px solid #e0e0e0;
        padding: 4px;
        background: #ffffff;
        font-family: roboto;
    }

    .dataTables_wrapper .dataTables_filter {
        float: right;
        text-align: right;
        display: none;
    }

    table.dataTable tbody th, table.dataTable tbody td {
        padding: 4px 10px !important;
    }
</style>

<script>
    $(document).ready(function () {
        $('#example').DataTable({
            type: 'post',
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });
</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script>

    $(document).ready(function(){


        $("#PaidAmount").keyup(function () {

            debugger

            var PreBalance = $("#PreBalance").val();

            var PaidAmount = $("#PaidAmount").val().replace("-", "");

            $("#PaidAmount").val(PaidAmount);

            // $("#PaidAmount").val(PaidAmount)
            $.ajax({
                type: "POST",
             //   url: "/PreBalanceAmount/Calculate",
                url: '@Url.Action("Calculate", "PreBalanceAmount")',
                data: '{PaidAmount: ' + JSON.stringify(PaidAmount) + ',PreBalance:' + JSON.stringify(PreBalance) + '}',
                //data: '{PreBalance: ' + JSON.stringify(PreBalance) + '}',
                contentType: "application/json; charset=utf-8",
                //dataType: "HTML",
                success: function (search1) {
                    // alert(searchList[0] + "" + searchList[1]);

                    $("#BalanceAmount").val(search1[0]);
                },

            });
        });

    });

</script>

<!-- ico font -->
@*</head>*@

<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">


        <div class="content-wrapper">
            <h5 class="topheadline">
                Pre Balance Amount


            </h5>

            <div>


            </div>


            <section class="content-header">
                <div class="container-fluid">


                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel-primary">

                                <div class="row">

                                    <div class="col-lg-12">
                                        <div class="col-lg-12" style="background: #bddff7;padding:0px">
                                            <div class="col-lg-9 padding0" style="font-family:roboto;padding:4px">
                                                <span style="padding-right:30px"> Pre Balance Amount</span>
                                                <input type="checkbox" />TPA
                                            </div>


                                        </div>

                                    </div>
                                </div>

                                <div class="pane-body">

                                    <div class="row">
                                        <div class="col-lg-12  rowmargintop rowmarginbottom">




                                            <div class="col-lg-4">
                                                <div class="col-lg-3">
                                                    <span>UHID No.</span>


                                                </div>
                                                <div class="col-lg-9">

                                                    <table style="width:100%">
                                                        <tr>

                                                            <td style="width:50%;padding-right:5px">
                                                                <select class="form-control input-sm" disabled></select>

                                                            </td>

                                                            <td>
                                                                <input type="text" value="@Model.PatientRegNo" name="PatientRegNo" id="PatientRegNO" class="form-control input-sm" />
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="col-lg-3">
                                                    <span>Name</span>


                                                </div>
                                                <div class="col-lg-9">

                                                    <input type="text" value="@Model.PatientName" id="PatientName" name="PatientName" class="form-control input-sm" />

                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="col-lg-2">
                                                    <span>Date</span>


                                                </div>
                                                <div class="col-lg-10">

                                                    <div class="col-lg-5 padding0">
                                                        <input type="Date" id="BillDate" name="BillDate" class="form-control input-sm" />

                                                    </div>

                                                    <div class="col-lg-2">
                                                        <span>Time</span>
                                                    </div>
                                                    <div class="col-lg-5 padding0">
                                                        <input type="time" id="time" name="time" class="form-control input-sm" />
                                                    </div>
                                                </div>
                                            </div>









                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>

                    </div>


                    <div class="row ">
                        <div class="col-md-9 rowmargintop">

                            <!-- Tab panes -->


                            <div class="form-group" style="    margin-bottom: 10px;">


                                <div class="col-md-12 padding0 rowmargintop">
                                    <div class="panel-primary" style="box-shadow:none">
                                        <div class="box-header">

                                        </div>
                                        <!-- /.box-header -->
                                        <table id="datatableAccountDetail" class="display" style="width:100%">
                                            <thead>
                                                <tr role="row">
                                                    <th class="sorting_asc" tabindex="0" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        PatientAccountRowID
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        RegNo
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        OPDIPDNO
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        DrAmount
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        CrAmount
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        P_BillNo
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        BillType
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        Date
                                                    </th>
                                                    <th class="sorting" aria-controls="datatable-responsive"
                                                        rowspan="1" colspan="1">
                                                        PaymentType
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody class="scrollbar">
                                                @{

                                                    for (int i = 0; i < Model.ds1.Tables[2].Rows.Count; i++)
                                                    {
                                                        string PatientAccountRowID = Model.ds1.Tables[2].Rows[i]["PatientAccountRowID"].ToString();
                                                        string RegNo = Model.ds1.Tables[2].Rows[i]["P_RegNo"].ToString();
                                                        string OPDIPDNO = Model.ds1.Tables[2].Rows[i]["OPDIPDNO"].ToString();
                                                        string DrAmount = Model.ds1.Tables[2].Rows[i]["DrAmount"].ToString();
                                                        string CrAmount = Model.ds1.Tables[2].Rows[i]["CrAmount"].ToString();
                                                        string P_BillNo = Model.ds1.Tables[2].Rows[i]["P_BillNo"].ToString();
                                                        string BillType = Model.ds1.Tables[2].Rows[i]["BillType"].ToString();
                                                        string Date = Model.ds1.Tables[2].Rows[i]["Date"].ToString();
                                                        string PaymentType = Model.ds1.Tables[2].Rows[i]["PaymentType"].ToString();

                                                        <tr>
                                                            <td>@PatientAccountRowID</td>
                                                            <td>@RegNo</td>
                                                            <td>@OPDIPDNO</td>
                                                            <td>@DrAmount</td>
                                                            <td>@CrAmount</td>
                                                            <td>@P_BillNo</td>
                                                            <td>@BillType</td>
                                                            <td>@Date</td>
                                                            <td>@PaymentType</td>

                                                            <td> <a href="@Url.Action("RptRefundAmount1", "PaymentAndDeposit", new { PatientAccountRowID = PatientAccountRowID, BillType = BillType, RegNo = RegNo, OPDIPDNO = OPDIPDNO })"><i class="fa fa-print fa-1x" aria-hidden="true"></i></a>  </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>


                                           

                                        </table>

                                        <!-- /.box-body -->
                                    </div>
                                    <!-- /.box -->
                                </div>

                            </div>


                        </div>

                        <div class="col-lg-3 rowmargintop">
                            <div class="panel-primary" style="box-shadow:none">
                                <div class="box-header with-border">
                                    <h3 class="panelheading">Amount Details</h3>
                                </div>

                                <div class="form-horizontal">
                                    <div class="panel-body padding0">

                                        <div class="col-lg-12 padding0 rowmargintop">

                                            <div class="col-lg-12 padding0">

                                                <div class="col-sm-6">
                                                    <span>Pre Balance Amt.</span>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="text" value="@Model.PreBalance" name="PreBalance" id="PreBalance" class="form-control">
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-lg-12 padding0 rowmargintop">

                                            <div class="col-lg-12 padding0">

                                                <div class="col-sm-6">
                                                    <span>Paid Amt.</span>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="text" name="PaidAmount" id="PaidAmount" class="form-control">
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-lg-12 padding0 rowmargintop">

                                            <div class="col-lg-12 padding0">

                                                <div class="col-sm-6" style="padding-right:0px">
                                                    <span>Payment Type</span>
                                                </div>
                                                <div class="col-sm-6">
                                                    <select class="form-control" id="PaymentType" name="PaymentType">

                                                        <option value="CASH">CASH</option>
                                                        <option value="Cheque">Cheque</option>
                                                        <option value="Credit Card">Credit Card</option>
                                                        <option value="Dedit Card">Debit Card</option>
                                                        <option value="E-money">E-money</option>
                                                        <option value="EFT">EFT</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-lg-12 padding0 rowmargintop">

                                            <div class="col-lg-12 padding0">
                                                <div class="col-sm-6">
                                                    <span>Balance Amt.</span>
                                                </div>
                                                <div class="col-sm-6">
                                                    <input type="text" name="BalanceAmount" id="BalanceAmount" class="form-control">
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-lg-12 padding0 rowmargintop rowmarginbottom">

                                            <div class="col-lg-12 padding0">

                                                <div class="col-sm-6" style="padding-right:0px">
                                                    <span>OPD/IPD</span>
                                                </div>
                                                <div class="col-sm-6">
                                                    <select class="form-control" disabled></select>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                            <div class="panel-primary rowmargintop" style="box-shadow:none">
                                <div class="box-header with-border">
                                    <h3 class="panelheading">Narration</h3>
                                </div>

                                <div class="form-horizontal">
                                    <div class="panel-body padding0">

                                        <div class="col-lg-12  rowmargintop rowmarginbottom">

                                            <div class="col-lg-12 padding0">

                                                <textarea name="Narrection" id="Narrection" class="form-control"></textarea>




                                            </div>
                                        </div>





                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>






                    <div class="col-lg-12" style="text-align: center; display: block;margin-top:10px">
                        <div class="btn-group dropdown-split-warning">

                            <button type="submit" class="btndivcss"><span class="fa fa-save buttoniconcss"></span>Save</button>


                        </div>
                        <div class="btn-group dropdown-split-warning">

                            <button type="button" class="btndivcss"><span class="fa fa-trash buttoniconcss"></span>Delete</button>


                        </div>
                        <div class="btn-group dropdown-split-warning">

                            <button type="reset" class="btndivcss"><span class="fa fa-refresh buttoniconcss"></span>Clear</button>


                        </div>
                        <div class="btn-group dropdown-split-warning">

                            <button type="button" class="btndivcss"><span class="fa fa-sign-out buttoniconcss"></span>Exit</button>


                        </div>

                    </div>


                </div>












            </section>

        </div>
    </div>

</body>




